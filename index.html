<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="不学习变傻瓜">
<meta property="og:url" content="https://wangerxzai.github.io/index.html">
<meta property="og:site_name" content="不学习变傻瓜">
<meta property="og:locale">
<meta property="article:author" content="wanger">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wangerxzai.github.io/"/>





  <title>不学习变傻瓜</title>
  








<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">不学习变傻瓜</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Coding by Wanger</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/30/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95_%E9%AB%98%E5%B0%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/30/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95_%E9%AB%98%E5%B0%9A/" itemprop="url">MATLAB 蚁群算法理论、应用及其与其它算法的混合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-30T00:00:00+08:00">
                2022-04-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">智能算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="蚁群算法理论_应用及其他算法的混合">蚁群算法理论_应用及其他算法的混合</h2>
<h3 id="聚类问题的蚁群算法">聚类问题的蚁群算法</h3>
<h4 id="k-means聚类分析">K-means聚类分析</h4>
<p>K-means算法的步骤如下：</p>
<p>(1）任选 K 个初试聚类中心：<span class="math inline">\(z_1,z_2,...,z_k\)</span> ；</p>
<p>(2）逐个将样本集仅中各个样本按最小距离原则分配给 K 个聚类中心；</p>
<p>(3）计算新的聚类中心 <span class="math inline">\(z_j^`(j=1,2,...,k)，z_j^`= \frac{1}{N_j} \sum_{X
\epsilon S_j} {X}\)</span> ，其中 <span class="math inline">\(N_j\)</span>为第 j 个聚类域 <span class="math inline">\(S_j\)</span>包含的个数；</p>
<p>(4）若 $z_j^` z_j (j = 1,2,...,K)
$，转（2)；否则算法收敛，计算结束。</p>
<h4 id="解聚类问题的蚁群算法">解聚类问题的蚁群算法</h4>
<ul>
<li><p><strong>算法思路</strong></p>
<p>模式样本分配给第 j 个聚类中心<span class="math inline">\(z_j(j=1,2,...,K)\)</span>，蚂蚁就在模式样本 i
到聚类中心 <span class="math inline">\(z_j\)</span> 的路径上留下外激素
<span class="math inline">\(T_{ij}\)</span> ，第 i 个蚂蚁选择聚类中心
<span class="math inline">\(z_j\)</span> 概率为：</p></li>
</ul>
<p><span class="math display">\[
P_{ij} = \frac {T_{ij}}{\sum _{j=1} ^{n} {T_{ij}}}
\]</span></p>
<p>更新方程为： <span class="math display">\[
T_{ij}^{new} = \rho T_{ij}^{old} + \frac{Q}{d_{ij}}
\]</span></p>
<p><span class="math inline">\(d_{ij}\)</span> ，为模式样本 i 到聚类中心
<span class="math inline">\(z_j\)</span> ，的距离， <span class="math inline">\(\rho\)</span>
表示强度的持久性系数，一般取0.5~0.99左右，Q为正常数。</p>
<ul>
<li><strong>求解算法</strong></li>
</ul>
<ol type="1">
<li>nc→0( nc 为循环次数），给 <span class="math inline">\(T_{ij}(i,j=1,2,...,n)\)</span>
赋相同的数值，给出蚂蚁数 m 、 Q 、 p 的值，随机给出一个分配方案；</li>
</ol>
<p>(2）对每个蚂蚁按转移概率 <span class="math inline">\(P_{ij}\)</span>
，选择下一个节点；</p>
<p>(3）计算新的聚类中心，计算每个模样本到新的聚类中心的距离 <span class="math inline">\(d_{ij}\)</span>，按更新方程修信息强度；</p>
<ol start="4" type="1">
<li>nc→nc +1，若 nc ＞规定的次数 NC
，停止运行，根据外激素输出最好的解；否则转（2) ;</li>
</ol>
<ul>
<li>数值分析</li>
</ul>
<p>采用蚁群算法参数设置如下： p =0.9, Q =100, NC
=100。蚁群算法的结果与初始聚类中心关系也不大。采用概率改变变量，蚁群算法考虑到了附近解“外激素”，好的解附近的“外激素”较多，它被选取的概率就大，蚁群算法的迭代次数一般比较少，其方法相对比较有效。类问题是一个线性整数规划问题，特别当模式样本和分类数很大时，用蚁群算法解决多聚类问题确实有效。对于“分类数目未知”的情况，如何用蚁群算法来解，可以作进一步的研究。</p>
<table>
<thead>
<tr class="header">
<th>算法</th>
<th>正确率</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>K-means（任意两个样本作聚类中心）</td>
<td>86.8%</td>
</tr>
<tr class="even">
<td>K-means（随机产生一个聚类方案）</td>
<td>90%</td>
</tr>
<tr class="odd">
<td>蚁群算法</td>
<td>92%</td>
</tr>
</tbody>
</table>
<h4 id="解聚类问题的与k-means算法混合的蚁群算法">解聚类问题的与K-means算法混合的蚁群算法</h4>
<p>从实验可知， K-均值算法收敛速度比 ACO
快，但是其结果与初始聚类中心有关。而 ACO
较精确，但速度比较慢，需要对其改进。蚁群算法初始化时，各路径的信息素取相同值，让蚂蚁以等概率选择路径，这样使蚂蚁很难在短时间内从大量的杂乱无章的路径中，找出一条较好的路径，所以收敛速度较慢。假如初始化时就给出启发性的信息量，可以加快收敛速度。改进思路是与
K ﹣均值算法混合，具体方法是先用 K
-均值算法作快速分类，根据分类结果更新信息素，指导其它蚂蚁选择，其他步骤与同上。</p>
<p>根据分类结果更新信息素，有两种方法：</p>
<p>其一：根据分类结果，计算出聚类中心<span class="math inline">\(z_j(j=1,2,..,k)\)</span>，若模式样本 i
分配到聚类中心<span class="math inline">\(z_j\)</span>，计算模式样本 i
到聚类中心 <span class="math inline">\(z_j(j=1,2,...,k)\)</span> 的距离
<span class="math inline">\(d_{ij}\)</span> ，则<span class="math inline">\(△T_{ij} =
\frac{Q}{d_{ij}}\)</span>，其它路径不变。</p>
<p>其二：根据分类结果，计算出聚类中心<span class="math inline">\(z_j(j=1,2,..,k)\)</span>，计算模式样本i(i=1,2,...,n)到聚类中心<span class="math inline">\(z_j(j=1,2,..,k)\)</span>的距离<span class="math inline">\(d_{ij}\)</span>，所有路径的信息增量<span class="math inline">\(△T_{ij} = \frac{Q}{d_{ij}}\)</span>。</p>
<ul>
<li>数值分析</li>
</ul>
<p>这里采用著名的Iris5植物样本数据进行测试。 Iris
植物样本数据分别属于3种植物的150个样本，每个样本均为代表植物4种特征的4维向量。
K ﹣均值算法初始聚类中心取150个样本中的任意3个，共有 <span class="math inline">\(C_{150}^3\)</span>
=551300种情况，每种情况运行一次（耗时接近5小时），只有221234次达到最优解。蚁群算法参数：
p =0.99,Q=80, NC =100，蚂蚁数 m
=30，各种算法各测试50次，结果如表所示。从表可以看出，其中蚁群算法中的3种算法都比
K ﹣均值算法效果好，特别后两种算法效果更好。由于 K
﹣均值算法有可能结果不太好，对于方法一，对后续的蚁群算法产生误导，而改进方法二中，信息増量是根据距离大小决定，会减少影响，因此效果比改进方法一好。</p>
<table>
<thead>
<tr class="header">
<th>算法</th>
<th>平均值</th>
<th>最好解</th>
<th>最差解</th>
<th>最好解的次数</th>
<th>正确率</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>K-means</td>
<td>91.9417</td>
<td>78.6510</td>
<td>682.8385</td>
<td>221234</td>
<td>40.13%</td>
</tr>
<tr class="even">
<td>基本蚁群</td>
<td>90.0897</td>
<td>78.6510</td>
<td>143.2725</td>
<td>21</td>
<td>42%</td>
</tr>
<tr class="odd">
<td>改进一</td>
<td>80.3594</td>
<td>78.6510</td>
<td>113.1760</td>
<td>24</td>
<td>48%</td>
</tr>
<tr class="even">
<td>改进二</td>
<td>80.1692</td>
<td>78.6510</td>
<td>110.9711</td>
<td>32</td>
<td>64%</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/29/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/MATLAB%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95%EF%BC%9A%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/29/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/MATLAB%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95%EF%BC%9A%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/" itemprop="url">MATLAB 蚁群算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-29T00:00:00+08:00">
                2022-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">智能算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="matlab智能算法蚁群算法">MATLAB智能算法：蚁群算法</h2>
<h3 id="蚁群算法">蚁群算法</h3>
<p><em>参考《MATLAB》智能算法，温正，清华大学出版社</em></p>
<h4 id="蚁群算法基本原理">蚁群算法基本原理</h4>
<p>由Marco
Dorigo于1992年在他的博士论文中提出，其灵感来源于蚂蚁在寻找食物过程中发现路径的行为。
蚁群优化算法是模拟蚂蚁觅食的原理，设计出的一种群集智能算法。蚂蚁在觅食过程中能够在其经过的路径上留下一种称之为信息素的物质，并在觅食过程中能够感知这种质的强度，并指导自己行动方向，他们总是朝着该物质强度高的方向移动，因此大量蚂蚁组成的集体觅食就表现为一种对信息素的正反馈现象。
某一条路径越短，路径上经过的蚂蚁越多。其信息素遗留的也就越多，信息素的浓度也就越高，蚂蚁选择这条路径的几率也就越高。由此构成的正反馈过程，从而逐渐的逼近最优路径，找到最优路径。</p>
<p>蚂蚁觅食的运行轨迹模式如图所示，蚂蚁以信息素作为媒介而间接进行信息交流，判断洞穴到食物地点的最佳路径。</p>
<p><img src="https://img-blog.csdnimg.cn/6ffc861569b242aca814cd7e853bd1aa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>当蚂蚁从食物源走到蚁穴，或者从蚁穴走到食物源时，都会在经过的路径上释放信息素，从而形成了一条含有信息素的路径，蚂蚁可以感觉出路径上信息素浓度的大小,并且以较高的概率选择信息素浓度较高的路径。</p>
<p>人工蚂蚁的搜索主要包括3种智能行为：</p>
<ol type="1">
<li><p><strong>蚂蚁利用信息素进行相互通信。</strong></p>
<p>蚂蚁在所选择的路径上会释放一种信息素的物质，当其他蚂蚁进行路径选择时，会根据路径上的信息素浓度进行选择，这样信息素就成为蚂蚁之间进行通信的媒介。</p></li>
<li><p><strong>蚂蚁的记忆行为。</strong></p>
<p>一只蚂蚁搜索过的路径在下次搜索时就不再被该蚂蚁选择，因此在蚁群算法中建立禁忌表进行模拟。</p></li>
<li><p><strong>蚂蚁的集群活动。</strong></p>
<p>通过一只蚂蚁的运动很难达到事物源，但整个蚁群进行搜索就完全不同。当某些路径上通过的蚂蚁越来越多时，路径上留下的信息素数量也就越多，导致信息素强度增大,蚂蚁选择该路径的概率随之增加,从而进一步增加该路径的作息素强度，而通过的蚂蚁比较少的路径上的信息素会随着时间的推移而挥发，从而变得越来越少。</p></li>
</ol>
<p>介绍5种主要蚁群算法的过程：</p>
<ol type="1">
<li><strong>蚂蚁系统</strong></li>
</ol>
<p>初始时刻，m只蚂蚁随机放置于城市中，各路径上的信息素相同。设<span class="math inline">\(T_0\)</span>为信息素的初始值，可以设其值为m /
<span class="math inline">\(L_m\)</span>，<span class="math inline">\(L_m\)</span>是由最近启发式方法构造的路径长度。
其次，对于蚂蚁k，按照随机比例规则选择下一步要转移的城市，选择概率为：
<span class="math display">\[
p^k_{ij}(t) = \begin{cases}
\frac {[T_{ij}(t)]^\alpha [\eta_{ij}(t)]^\beta}
{\sum_{s\epsilon a_k}{[T_{is}(t)]^\alpha [\eta_{is}(t)]^\beta}}, &amp;
j\epsilon a_k \\
0, &amp; 其他情况
\end{cases}
\]</span> 其中，<span class="math inline">\(T_{ij}\)</span>为边（i，j）上的信息素；<span class="math inline">\(\eta_{ij} = \frac {1} {d_{ij}}\)</span>
为从城市i转移到城市j的启发式因子；<span class="math inline">\(a_k\)</span>为蚂蚁k下一步被允许访问的城市集合。</p>
<p>为了不让蚂蚁选择已经访问过的城市，采用禁忌表<span class="math inline">\(ta_k\)</span>来记录蚂蚁k当前走过的城市。经过t时刻，所有蚂蚁都完成一次周游，计算每只蚂蚁走过的路径长度，并保存最短的路径长度，同时，更新各边的信息素。首先是信息素挥发，其次是蚂蚁在它们所在的边上释放信息素，其公式为：
<span class="math display">\[
T_{ij} = (1-\rho)T_{ij}
\]</span></p>
<p>其中，<span class="math inline">\(\rho\)</span>为信息素挥发系数，且<span class="math inline">\(0&lt;\rho\leq1\)</span>。</p>
<p><span class="math display">\[
T_{ij} = T_{ij} + \sum_{k=1}^{m}{▲T_{ij}^k}
\]</span> 其中，<span class="math inline">\(▲T_{ij}^k\)</span>
是第k只蚂蚁向它经过的边释放的信息素，定义为 <span class="math display">\[
▲T_{ij}^k = \begin{cases}
\frac{1}{d_{ij}}, &amp; \text{如果边（i，j）在路径}T^k\text{上} \\
0, &amp; \text{其他情况}
\end{cases}
\]</span>
根据上式可知，蚂蚁构建的路径长度越小，则路径上各条边就会得到更多的信息素，则在以后的迭代种就更有可能被其他蚂蚁选择。蚂蚁完成一次循环后，清空禁忌表，重新回到初始城市，准备下一次的行动。</p>
<p>蚂蚁系统解决小规模TSP问题时性能较好，但当测试问题规模增大，性能下降严重。</p>
<ol start="2" type="1">
<li><strong>精英蚂蚁系统</strong></li>
</ol>
<p>设计思想为，对算法每次循环后给予最优路径额外的信息素量，找出这个解的蚂蚁称为精英蚂蚁。</p>
<p>将这条最优路径记为<span class="math inline">\(T^{bs}\)</span>。针对路径<span class="math inline">\(T^{bs}\)</span>的额外强化是通过向<span class="math inline">\(T^{bs}\)</span>中的每一条边增加<span class="math inline">\(e/L^{bs}\)</span>大小的信息素得到。其中e是一个参数，它定义了给予路径<span class="math inline">\(T^{bs}\)</span>的权重大小。这样相应的信息素的更新公式为：
<span class="math display">\[
T_{ij}(t+1) = (1-\rho)T_{ij}(t) + \sum_{k=1}^m{▲T_{ij}^k(t)} +
e▲T_{ij}^{bs}(t)
\]</span>
文献指出，使用精英策略并选取一个适当的e值将使蚁群算法不但可以得到更好的解，而且能在更少的迭代次数下得到一些更好的解。</p>
<ol start="3" type="1">
<li><strong>最大最小蚂蚁系统</strong></li>
</ol>
<p>该系统是目前解决TSP问题最好的蚂蚁算法方案之一。其在蚂蚁系统基础上作了以下改进：</p>
<ul>
<li>将各条路径可能的外激素浓度限值在<span class="math inline">\([T_{min},T_{max}]\)</span>，超出这个范围的值被强制设置为端点值。这样做有效避免过早收敛于局部最优解，避免了某条路径上的信息素量远大于其他路径。</li>
<li>信息素的初始值被设定在其取值范围的上界。</li>
<li>强调对最优解的利用。每次迭代结束后，只有最优解所属路径上的信息被更新，从而更好地利用了历史信息。</li>
</ul>
<p>信息素更新公式为： <span class="math display">\[
T_{ij}(t+1) = (1-\rho)T_{ij}(t)  + ▲T_{ij}^{best}(t), \rho \epsilon(0,1)
\]</span></p>
<p>文献指出，逐渐增加全局最优解的使用频率，会使该算法获得更好的性能。</p>
<ol start="4" type="1">
<li><strong>基于排序的蚁群算法</strong></li>
</ol>
<p>改进思想为：每次迭代结束后，将蚂蚁所走路径按照从小到大顺序排序，算法根据路径长度赋予不同权重，路径长度越短权重越大。</p>
<p>信息素更新公式为： <span class="math display">\[
T_{ij}(t+1) = (1-\rho)T_{ij}(t) + \sum_{r=1}^{w-1}{(w-r)*▲T_{ij}^{r}(t)}
+ w * ▲T_{ij}^{gb}(t), \rho \epsilon(0,1)
\]</span></p>
<ol start="5" type="1">
<li><strong>蚁群系统</strong></li>
</ol>
<p>与蚂蚁不同的地方在于以下三个方面：</p>
<p>（1） 除了全局信息素更新规则外，还采用了局部信息素更新规则。</p>
<p>（2）信息素挥发和释放动作只在至今最优路径的边上执行，即每次迭代后只有至今最优蚂蚁被允许释放信息素。</p>
<p>（3）采用不同的路径选择规则，能更好地利用蚂蚁所积累的搜素经验。</p>
<p>路径选择规则的公式为： <span class="math display">\[
j = \begin{cases}
argmax(T_{il}[\eta_{il}(t)])^\beta, &amp; q\leq q_{0} \\
J, &amp; 其他情况
\end{cases}
\]</span></p>
<p><span class="math display">\[
p^k_{ij}(t) = \begin{cases}
\frac {[T_{ij}(t)]^\alpha [\eta_{ij}(t)]^\beta}
{\sum_{s\epsilon a_k}{[T_{is}(t)]^\alpha [\eta_{is}(t)]^\beta}}, &amp;
j\epsilon a_k \\
0, &amp; 其他情况
\end{cases}
\]</span></p>
<p>其中，q是均匀分布在区间[0,1]中的一个随机变量；<span class="math inline">\(q_0(0\leq q_{0} \leq
1)\)</span>是一个参数；J是根据以上公式给出的概率分布所产生的一个随机变量（<span class="math inline">\(\alpha = 1\)</span>）。</p>
<p>蚁群系统全局信息素更新规则为： <span class="math display">\[
T_{ij} = (1-\rho)T_{ij}  + \rho▲T_{ij}^{bs}, (i,j)\epsilon T^{bs}
\]</span></p>
<p><span class="math display">\[
▲T_{ij}^{bs} = 1 / C^{bs}
\]</span></p>
<p>蚁群系统的局部信息素更新规则方式定义如下：</p>
<p>在路径构建过程中，蚂蚁每经过一条边（i，j），都将立刻调用这条规则更新该边上的信息素，即
<span class="math display">\[
T_{ij} = (1-\rho)T_{ij}+ \xi T_{0}
\]</span> 其中，<span class="math inline">\(\xi\)</span>和<span class="math inline">\(T_{0}\)</span>是两个参数，<span class="math inline">\(\xi \epsilon (0,1)\)</span>，<span class="math inline">\(T_{0}\)</span>是信息量的初始值。局部更新的作用在于，蚂蚁每一次经过边（i，j），该边的信息素<span class="math inline">\(T_{ij}\)</span>将会减少，从而使得其他蚂蚁选中该边的概率相对减少。</p>
<h4 id="自适应蚁群算法">自适应蚁群算法</h4>
<p>当问题规模较大时，由于信息量挥发系数的存在，使那些从未被搜索过的路移信息量减小到接近于0．从而降低了算法在这些路径上的搜索能力，反之，当某条路经中信息量较大时，这些路径中的信息量增大，搜索过的路径再次被选择的机会就会变得更大。</p>
<p>搜索过的路径被再次选择的机会变大，会影响算法的全局搜索能力，此时通过固定地变化挥发系数虽然可以提高全局搜索能力，但却使算法的收敛速度降低。</p>
<p>自适应蚁群算法提出一种自适应的改变T值的方法,将信息素更新的公式为:
<span class="math display">\[
\begin{cases}
T_{ij}(t+1) = (1-\rho)^{1+\varphi(m)}T_{ij} + ▲T_{ij}, &amp; T \geq
T_{max}
\\
T_{ij}(t+1) = (1-\rho)^{1-\varphi(m)}T_{ij} + ▲T_{ij}, &amp; T &lt;
T_{max}
\end{cases}
\]</span> 其中，<span class="math inline">\(\varphi_m\)</span>为收敛次数m/c，是一个与收敛次数m成正比的函数，收敛次数m越多<span class="math inline">\(\varphi_m\)</span>的取值越大（c为常数）。</p>
<p>算法伪代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Begin </span><br><span class="line">初始化</span><br><span class="line"><span class="built_in">While</span> (不满足算法终止条件)&#123;</span><br><span class="line">	<span class="keyword">for</span> ( i = l ; i く m ; i ++)&#123; <span class="comment">// 将蚂蚁随机放置在 m 个城市上</span></span><br><span class="line">		<span class="keyword">for</span> ( j =<span class="number">0</span>; j く n ; j ++)&#123; <span class="comment">// 对 n 个蚂蚁进行循环</span></span><br><span class="line">			<span class="keyword">for</span>( i =<span class="number">0</span>; i く m - <span class="number">1</span> ; i ++)&#123; </span><br><span class="line">				蚂蚁 i 以概率 <span class="built_in">pi</span>(t) 选择下一个城市</span><br><span class="line">			&#125;</span><br><span class="line">			求出最佳结果</span><br><span class="line">			将最佳结果赋予蚂蚁 i </span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (最佳结果等于 n 个循环以前的最佳结果)&#123;</span><br><span class="line">			根据公式计算</span><br><span class="line">			进行下一个循环 </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">输出最佳结果</span><br></pre></td></tr></table></figure>
<h4 id="蚁群算法的实现">蚁群算法的实现</h4>
<p>设定目标函数为： <span class="math display">\[
f = -(x_1^4+3x_2^4-0.2cos(3\pi x1)-0.4cos(4\pi x2)+0.6)
\]</span> 搜索目标函数极大值。用matlab实现。</p>
<p><img src="https://img-blog.csdnimg.cn/54518a0a410645de95fb132fb71a92a2.png"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">clear all</span><br><span class="line">clc</span><br><span class="line"><span class="comment">%%初始化%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">Ant=<span class="number">300</span>;  <span class="comment">%蚂蚁数量</span></span><br><span class="line">Times=<span class="number">80</span>;  <span class="comment">%蚂蚁移动次数</span></span><br><span class="line">Rou=<span class="number">0.9</span>;  <span class="comment">%信息素挥发系数</span></span><br><span class="line">P0=<span class="number">0.2</span>;  <span class="comment">%转移概率常数</span></span><br><span class="line">Lower_1=<span class="number">-1</span>;  <span class="comment">%设置搜索范围</span></span><br><span class="line">Upper_1=<span class="number">1</span>;</span><br><span class="line">Lower_2=<span class="number">-1</span>;</span><br><span class="line">Upper_2=<span class="number">1</span>;</span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:Ant</span><br><span class="line">    X(<span class="built_in">i</span>,<span class="number">1</span>)=(Lower_1+(Upper_1-Lower_1)*<span class="built_in">rand</span>);  <span class="comment">%随机设置蚂蚁的初值位置</span></span><br><span class="line">    X(<span class="built_in">i</span>,<span class="number">2</span>)=(Lower_2+(Upper_2-Lower_2)*<span class="built_in">rand</span>);</span><br><span class="line">    Tau(<span class="built_in">i</span>)=F(X(<span class="built_in">i</span>,<span class="number">1</span>),X(<span class="built_in">i</span>,<span class="number">2</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">step=<span class="number">0.05</span>;</span><br><span class="line">f=<span class="string">&#x27;-(x.^4+3*y.^4-0.2*cos(3*pi*x)-0.4*cos(4*pi*y)+0.6)&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[x,y]=<span class="built_in">meshgrid</span>(Lower_1:step:Upper_1,Lower_2:step:Upper_2);</span><br><span class="line">z=eval(f);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">mesh(x,y,z);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot3</span>(X(:,<span class="number">1</span>),X(:,<span class="number">2</span>),Tau,<span class="string">&#x27;k*&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">text(<span class="number">0.1</span>,<span class="number">0.8</span>,<span class="number">-0.1</span>,<span class="string">&#x27;蚂蚁的初始分布位置&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x&#x27;</span>);ylabel(<span class="string">&#x27;y&#x27;</span>);zlabel(<span class="string">&#x27;f(x,y)&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> T=<span class="number">1</span>:Times</span><br><span class="line">    lamda=<span class="number">1</span>/T;</span><br><span class="line">    [Tau_Best(T),BestIndex]=<span class="built_in">max</span>(Tau);</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:Ant</span><br><span class="line">        P(T,<span class="built_in">i</span>)=(Tau(BestIndex)-Tau(<span class="built_in">i</span>))/Tau(BestIndex);  <span class="comment">%计算状态转移概率</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:Ant</span><br><span class="line">        <span class="keyword">if</span> P(T,<span class="built_in">i</span>)&lt;P0  <span class="comment">%局部搜索</span></span><br><span class="line">            temp1=X(<span class="built_in">i</span>,<span class="number">1</span>)+(<span class="number">2</span>*<span class="built_in">rand</span><span class="number">-1</span>)*lamda;</span><br><span class="line">            temp2=X(<span class="built_in">i</span>,<span class="number">2</span>)+(<span class="number">2</span>*<span class="built_in">rand</span><span class="number">-1</span>)*lamda;</span><br><span class="line">        <span class="keyword">else</span>  <span class="comment">%全局搜索</span></span><br><span class="line">            temp1=X(<span class="built_in">i</span>,<span class="number">1</span>)+(Upper_1-Lower_1)*(<span class="built_in">rand</span><span class="number">-0.5</span>);</span><br><span class="line">            temp2=X(<span class="built_in">i</span>,<span class="number">2</span>)+(Upper_2-Lower_2)*(<span class="built_in">rand</span><span class="number">-0.5</span>);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">%越界处理</span></span><br><span class="line">        <span class="keyword">if</span> temp1&lt;Lower_1</span><br><span class="line">            temp1=Lower_1;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> temp1&gt;Upper_1</span><br><span class="line">            temp1=Upper_1;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> temp2&lt;Lower_2</span><br><span class="line">            temp2=Lower_2;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> temp2&gt;Upper_2</span><br><span class="line">            temp2=Upper_2;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">%%%</span></span><br><span class="line">        <span class="keyword">if</span> F(temp1,temp2)&gt;F(X(<span class="built_in">i</span>,<span class="number">1</span>),X(<span class="built_in">i</span>,<span class="number">2</span>))  <span class="comment">%判断蚂蚁是否移动</span></span><br><span class="line">            X(<span class="built_in">i</span>,<span class="number">1</span>)=temp1;</span><br><span class="line">            X(<span class="built_in">i</span>,<span class="number">2</span>)=temp2;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:Ant</span><br><span class="line">        Tau(<span class="built_in">i</span>)=(<span class="number">1</span>-Rou)*Tau(<span class="built_in">i</span>)+F(X(<span class="built_in">i</span>,<span class="number">1</span>),X(<span class="built_in">i</span>,<span class="number">2</span>));  <span class="comment">%更新信息量</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">mesh(x,y,z);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">x=X(:,<span class="number">1</span>);</span><br><span class="line">y=X(:,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">plot3</span>(x,y,eval(f),<span class="string">&#x27;k*&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">text(<span class="number">0.1</span>,<span class="number">0.8</span>,<span class="number">-0.1</span>,<span class="string">&#x27;蚂蚁的最终分布位置&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x&#x27;</span>);ylabel(<span class="string">&#x27;y&#x27;</span>);zlabel(<span class="string">&#x27;f(x,y)&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">[max_value,max_index]=<span class="built_in">max</span>(Tau);</span><br><span class="line">maxX=X(max_index,<span class="number">1</span>);</span><br><span class="line">maxY=X(max_index,<span class="number">2</span>);</span><br><span class="line">maxValue=F(X(max_index,<span class="number">1</span>),X(max_index,<span class="number">2</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%目标函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[F]</span>=<span class="title">F</span><span class="params">(x1,x2)</span>  </span></span><br><span class="line">F=-(x1.^<span class="number">4</span>+<span class="number">3</span>*x2.^<span class="number">4</span><span class="number">-0.2</span>*<span class="built_in">cos</span>(<span class="number">3</span>*<span class="built_in">pi</span>*x1)<span class="number">-0.4</span>*<span class="built_in">cos</span>(<span class="number">4</span>*<span class="built_in">pi</span>*x2)+<span class="number">0.6</span>);</span><br></pre></td></tr></table></figure>
<h3 id="应用路径规划">应用：路径规划</h3>
<h4 id="移动机器人">移动机器人</h4>
<p>要求机器人依据某个或某些优化原则，在其工作空间中找到一条从起始状态到目标状态的能避开障碍物的最优路径。</p>
<p><img src="https://img-blog.csdnimg.cn/5cda16ed47694ddca04e3a17c7e1e38a.png"></p>
<p>算法流程为：</p>
<ol type="1">
<li>输入0-1矩阵表示机器人寻找最优路径的地图，0表示可通过的，1表示障碍物。</li>
<li>输人初始的信息素矩阵，选择初始点(0,20)和终止点(20,0)并且设置参数(信息素重要程度参数<span class="math inline">\(\alpha = 1\)</span>，启发式因子重要程度参数<span class="math inline">\(\beta = 7\)</span>，信息素蒸发系数<span class="math inline">\(\rho =
0.3\)</span>，信息素增加强度系数Q=1)。在此次计算中，设置所有位置的初始信息素相等。</li>
<li>选择从初始点下一步可以到达的节点，根据每个节点的信息素求出前往每个节点的概率，并利用轮盘算法选取下一步的初始点。</li>
</ol>
<p><span class="math display">\[
P_{ij}^k = \begin{cases}
\frac{[T_{ij}(t)]^\alpha [\eta_{ij}]^\beta}
{\sum_{k\epsilon {N-tabu_k}}{[T_{ij}(t)]^\alpha[\eta_{ij}]^\beta}} ,
&amp; j \epsilon N - tabu_k
\\
0, &amp; 其他
\end{cases}
\]</span></p>
<p>其中<span class="math inline">\(T_{ij}(t)\)</span>为析取图中弧(i,j)上的信息素的浓度；<span class="math inline">\(\eta_{ij}\)</span>为弧(i,j)相关联的启发性信息，<span class="math inline">\(\alpha \beta\)</span>在第二步已经定义。</p>
<ol start="4" type="1">
<li>更新路径以及路程长度。</li>
<li>重复34两步，直到蚂蚁到达终点或者无路可走。</li>
<li>重复345，直到某一代m只蚂蚁迭代结束。</li>
<li>更新信息素矩阵，其中没有到达的蚂蚁不算在内。</li>
</ol>
<p><span class="math display">\[
T_{ij}(t+1) = (1-\rho)T_{ij}(t) +▲T_{ij} \\
▲T_{ij} = \begin{cases}
Q / L_k(t) , &amp; 蚂蚁k经过i，j
\\
0, &amp; 蚂蚁k不经过i，j
\end{cases}
\]</span></p>
<ol start="8" type="1">
<li>重复3~7，直到第n代蚂蚁迭代结束。</li>
</ol>
<p>迭代图：</p>
<p><img src="https://img-blog.csdnimg.cn/06604733e4894c1986e78228516b8a49.png#pic_center"></p>
<p>结果图：</p>
<p><img src="https://img-blog.csdnimg.cn/16d35054b3274b2f87a21396112ecb19.png#pic_center"></p>
<p>收敛曲线，在第68次迭代时，完成收敛：</p>
<p><img src="https://img-blog.csdnimg.cn/62c46f31ebbb440abd179ee4454ca8ce.png#pic_center"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line">G=[<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">   <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;];</span><br><span class="line">MM=<span class="built_in">size</span>(G,<span class="number">1</span>);                  <span class="comment">% G 地形图为01矩阵，1表示障碍物 </span></span><br><span class="line">Tau=<span class="built_in">ones</span>(MM*MM,MM*MM);         <span class="comment">% Tau 初始信息素矩阵</span></span><br><span class="line">Tau=<span class="number">8.</span>*Tau; </span><br><span class="line">K=<span class="number">200</span>;                         <span class="comment">% K 迭代次数（指蚂蚁出动多少波）</span></span><br><span class="line">M=<span class="number">80</span>;                          <span class="comment">% 蚂蚁个数</span></span><br><span class="line">S=<span class="number">1</span> ;                          <span class="comment">% 最短路径的起始点</span></span><br><span class="line">E=MM*MM;                       <span class="comment">% 最短路径的目的点</span></span><br><span class="line">Alpha=<span class="number">1</span>;                       <span class="comment">% Alpha 表征信息素重要程度的参数</span></span><br><span class="line">Beta=<span class="number">8</span>;                        <span class="comment">% Beta 表征启发式因子重要程度的参数</span></span><br><span class="line">Rho=<span class="number">0.4</span> ;                      <span class="comment">% Rho 信息素蒸发系数</span></span><br><span class="line">Q=<span class="number">1</span>;                           <span class="comment">% Q 信息素增加强度系数 </span></span><br><span class="line">minkl=<span class="built_in">inf</span>; </span><br><span class="line">mink=<span class="number">0</span>; </span><br><span class="line">minl=<span class="number">0</span>; </span><br><span class="line"> D=G2D(G); </span><br><span class="line">N=<span class="built_in">size</span>(D,<span class="number">1</span>);            <span class="comment">%N表示问题的规模（象素个数）</span></span><br><span class="line"> a=<span class="number">1</span>;                   <span class="comment">%小方格象素的边长</span></span><br><span class="line"> Ex=a*(<span class="built_in">mod</span>(E,MM)<span class="number">-0.5</span>);  <span class="comment">%终止点横坐标</span></span><br><span class="line"> <span class="keyword">if</span> Ex==<span class="number">-0.5</span> </span><br><span class="line">Ex=MM<span class="number">-0.5</span>; </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line">Ey=a*(MM+<span class="number">0.5</span>-<span class="built_in">ceil</span>(E/MM));<span class="comment">%终止点纵坐标</span></span><br><span class="line"> Eta=<span class="built_in">zeros</span>(N);           <span class="comment">%启发式信息，取为至目标点的直线距离的倒数</span></span><br><span class="line"> <span class="comment">%以下启发式信息矩阵</span></span><br><span class="line"> <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:N </span><br><span class="line"> ix=a*(<span class="built_in">mod</span>(<span class="built_in">i</span>,MM)<span class="number">-0.5</span>); </span><br><span class="line">   <span class="keyword">if</span> ix==<span class="number">-0.5</span> </span><br><span class="line">   ix=MM<span class="number">-0.5</span>; </span><br><span class="line">   <span class="keyword">end</span> </span><br><span class="line">iy=a*(MM+<span class="number">0.5</span>-<span class="built_in">ceil</span>(<span class="built_in">i</span>/MM));  </span><br><span class="line">   <span class="keyword">if</span> <span class="built_in">i</span>~=E </span><br><span class="line">   Eta(<span class="built_in">i</span>)=<span class="number">1</span>/((ix-Ex)^<span class="number">2</span>+(iy-Ey)^<span class="number">2</span>)^<span class="number">0.5</span>; </span><br><span class="line">   <span class="keyword">else</span> </span><br><span class="line">   Eta(<span class="built_in">i</span>)=<span class="number">100</span>; </span><br><span class="line">   <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line">ROUTES=cell(K,M);   <span class="comment">%用细胞结构存储每一代的每一只蚂蚁的爬行路线</span></span><br><span class="line"> PL=<span class="built_in">zeros</span>(K,M);     <span class="comment">%用矩阵存储每一代的每一只蚂蚁的爬行路线长度</span></span><br><span class="line"> <span class="comment">%启动K轮蚂蚁觅食活动，每轮派出M只蚂蚁</span></span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:K </span><br><span class="line"><span class="keyword">for</span> m=<span class="number">1</span>:M </span><br><span class="line"><span class="comment">%状态初始化</span></span><br><span class="line">W=S;           <span class="comment">%当前节点初始化为起始点</span></span><br><span class="line">Path=S;        <span class="comment">%爬行路线初始化</span></span><br><span class="line">PLkm=<span class="number">0</span>;         <span class="comment">%爬行路线长度初始化</span></span><br><span class="line">TABUkm=<span class="built_in">ones</span>(N);<span class="comment">%禁忌表初始化</span></span><br><span class="line">TABUkm(S)=<span class="number">0</span>;   <span class="comment">%已经在初始点了，因此要排除</span></span><br><span class="line">DD=D;          <span class="comment">%邻接矩阵初始化</span></span><br><span class="line"><span class="comment">%下一步可以前往的节点</span></span><br><span class="line">DW=DD(W,:); </span><br><span class="line">DW1=<span class="built_in">find</span>(DW); </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="built_in">length</span>(DW1) </span><br><span class="line">   <span class="keyword">if</span> TABUkm(DW1(<span class="built_in">j</span>))==<span class="number">0</span> </span><br><span class="line">      DW(DW1(<span class="built_in">j</span>))=<span class="number">0</span>; </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line">LJD=<span class="built_in">find</span>(DW); </span><br><span class="line">Len_LJD=<span class="built_in">length</span>(LJD);<span class="comment">%可选节点的个数</span></span><br><span class="line"><span class="comment">%蚂蚁未遇到食物或者陷入死胡同或者觅食停止</span></span><br><span class="line"> <span class="keyword">while</span> W~=E&amp;&amp;Len_LJD&gt;=<span class="number">1</span> </span><br><span class="line"><span class="comment">%转轮赌法选择下一步怎么走</span></span><br><span class="line"> PP=<span class="built_in">zeros</span>(Len_LJD); </span><br><span class="line">  <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:Len_LJD </span><br><span class="line">    PP(<span class="built_in">i</span>)=(Tau(W,LJD(<span class="built_in">i</span>))^Alpha)*((Eta(LJD(<span class="built_in">i</span>)))^Beta); </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line">sumpp=sum(PP); </span><br><span class="line">PP=PP/sumpp;<span class="comment">%建立概率分布</span></span><br><span class="line">Pcum(<span class="number">1</span>)=PP(<span class="number">1</span>); </span><br><span class="line">  <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:Len_LJD </span><br><span class="line">  Pcum(<span class="built_in">i</span>)=Pcum(<span class="built_in">i</span><span class="number">-1</span>)+PP(<span class="built_in">i</span>); </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line">Select=<span class="built_in">find</span>(Pcum&gt;=<span class="built_in">rand</span>); </span><br><span class="line">to_visit=LJD(Select(<span class="number">1</span>)); </span><br><span class="line"><span class="comment">%状态更新和记录</span></span><br><span class="line">Path=[Path,to_visit];       <span class="comment">%路径增加</span></span><br><span class="line">PLkm=PLkm+DD(W,to_visit);   <span class="comment">%路径长度增加</span></span><br><span class="line">W=to_visit;                 <span class="comment">%蚂蚁移到下一个节点</span></span><br><span class="line">   <span class="keyword">for</span> kk=<span class="number">1</span>:N </span><br><span class="line">      <span class="keyword">if</span> TABUkm(kk)==<span class="number">0</span> </span><br><span class="line">      DD(W,kk)=<span class="number">0</span>; </span><br><span class="line">      DD(kk,W)=<span class="number">0</span>; </span><br><span class="line">      <span class="keyword">end</span> </span><br><span class="line">   <span class="keyword">end</span> </span><br><span class="line">TABUkm(W)=<span class="number">0</span>;<span class="comment">%已访问过的节点从禁忌表中删除</span></span><br><span class="line"> DW=DD(W,:); </span><br><span class="line">DW1=<span class="built_in">find</span>(DW); </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="built_in">length</span>(DW1) </span><br><span class="line">    <span class="keyword">if</span> TABUkm(DW1(<span class="built_in">j</span>))==<span class="number">0</span> </span><br><span class="line">       DW(<span class="built_in">j</span>)=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line">LJD=<span class="built_in">find</span>(DW); </span><br><span class="line">Len_LJD=<span class="built_in">length</span>(LJD);<span class="comment">%可选节点的个数</span></span><br><span class="line"> <span class="keyword">end</span> </span><br><span class="line"><span class="comment">%记下每一代每一只蚂蚁的觅食路线和路线长度</span></span><br><span class="line"> ROUTES&#123;k,m&#125;=Path; </span><br><span class="line">   <span class="keyword">if</span> Path(<span class="keyword">end</span>)==E </span><br><span class="line">      PL(k,m)=PLkm; </span><br><span class="line">      <span class="keyword">if</span> PLkm&lt;minkl </span><br><span class="line">          mink=k;minl=m;minkl=PLkm; </span><br><span class="line">      <span class="keyword">end</span> </span><br><span class="line">   <span class="keyword">else</span> </span><br><span class="line">      PL(k,m)=<span class="number">0</span>; </span><br><span class="line">   <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="comment">%更新信息素</span></span><br><span class="line">Delta_Tau=<span class="built_in">zeros</span>(N,N);<span class="comment">%更新量初始化</span></span><br><span class="line">   <span class="keyword">for</span> m=<span class="number">1</span>:M </span><br><span class="line">     <span class="keyword">if</span> PL(k,m)  </span><br><span class="line">        ROUT=ROUTES&#123;k,m&#125;; </span><br><span class="line">        TS=<span class="built_in">length</span>(ROUT)<span class="number">-1</span>;<span class="comment">%跳数</span></span><br><span class="line">         PL_km=PL(k,m); </span><br><span class="line">        <span class="keyword">for</span> s=<span class="number">1</span>:TS </span><br><span class="line">          x=ROUT(s); </span><br><span class="line">          y=ROUT(s+<span class="number">1</span>); </span><br><span class="line">          Delta_Tau(x,y)=Delta_Tau(x,y)+Q/PL_km; </span><br><span class="line">          Delta_Tau(y,x)=Delta_Tau(y,x)+Q/PL_km; </span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">     <span class="keyword">end</span> </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line">Tau=(<span class="number">1</span>-Rho).*Tau+Delta_Tau;<span class="comment">%信息素挥发一部分，新增加一部分</span></span><br><span class="line"> <span class="keyword">end</span> </span><br><span class="line"><span class="comment">%绘图</span></span><br><span class="line">plotif=<span class="number">1</span>;<span class="comment">%是否绘图的控制参数</span></span><br><span class="line"> <span class="keyword">if</span> plotif==<span class="number">1</span> <span class="comment">%绘收敛曲线</span></span><br><span class="line">    minPL=<span class="built_in">zeros</span>(K); </span><br><span class="line">   <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:K </span><br><span class="line">     PLK=PL(<span class="built_in">i</span>,:); </span><br><span class="line">     Nonzero=<span class="built_in">find</span>(PLK); </span><br><span class="line">     PLKPLK=PLK(Nonzero); </span><br><span class="line">     minPL(<span class="built_in">i</span>)=<span class="built_in">min</span>(PLKPLK); </span><br><span class="line">   <span class="keyword">end</span> </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>) </span><br><span class="line"><span class="built_in">plot</span>(minPL); </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line">grid on </span><br><span class="line">title(<span class="string">&#x27;收敛曲线变化趋势&#x27;</span>); </span><br><span class="line">xlabel(<span class="string">&#x27;迭代次数&#x27;</span>); </span><br><span class="line">ylabel(<span class="string">&#x27;最小路径长度&#x27;</span>); </span><br><span class="line"><span class="comment">%绘爬行图</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>) </span><br><span class="line">axis([<span class="number">0</span>,MM,<span class="number">0</span>,MM]) </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:MM </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:MM </span><br><span class="line"><span class="keyword">if</span> G(<span class="built_in">i</span>,<span class="built_in">j</span>)==<span class="number">1</span> </span><br><span class="line">x1=<span class="built_in">j</span><span class="number">-1</span>;y1=MM-<span class="built_in">i</span>; </span><br><span class="line">x2=<span class="built_in">j</span>;y2=MM-<span class="built_in">i</span>; </span><br><span class="line">x3=<span class="built_in">j</span>;y3=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">x4=<span class="built_in">j</span><span class="number">-1</span>;y4=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">fill([x1,x2,x3,x4],[y1,y2,y3,y4],[<span class="number">0.2</span>,<span class="number">0.2</span>,<span class="number">0.2</span>]); </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">x1=<span class="built_in">j</span><span class="number">-1</span>;y1=MM-<span class="built_in">i</span>; </span><br><span class="line">x2=<span class="built_in">j</span>;y2=MM-<span class="built_in">i</span>; </span><br><span class="line">x3=<span class="built_in">j</span>;y3=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">x4=<span class="built_in">j</span><span class="number">-1</span>;y4=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">fill([x1,x2,x3,x4],[y1,y2,y3,y4],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]); </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line">title(<span class="string">&#x27;机器人运动轨迹&#x27;</span>); </span><br><span class="line">xlabel(<span class="string">&#x27;坐标x&#x27;</span>); </span><br><span class="line">ylabel(<span class="string">&#x27;坐标y&#x27;</span>);</span><br><span class="line">ROUT=ROUTES&#123;mink,minl&#125;; </span><br><span class="line">LENROUT=<span class="built_in">length</span>(ROUT); </span><br><span class="line">Rx=ROUT; </span><br><span class="line">Ry=ROUT; </span><br><span class="line"><span class="keyword">for</span> ii=<span class="number">1</span>:LENROUT </span><br><span class="line">Rx(ii)=a*(<span class="built_in">mod</span>(ROUT(ii),MM)<span class="number">-0.5</span>); </span><br><span class="line"><span class="keyword">if</span> Rx(ii)==<span class="number">-0.5</span> </span><br><span class="line">Rx(ii)=MM<span class="number">-0.5</span>; </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line">Ry(ii)=a*(MM+<span class="number">0.5</span>-<span class="built_in">ceil</span>(ROUT(ii)/MM)); </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="built_in">plot</span>(Rx,Ry) </span><br><span class="line"> <span class="keyword">end</span> </span><br><span class="line">plotif2=<span class="number">1</span>;<span class="comment">%绘各代蚂蚁爬行图</span></span><br><span class="line"><span class="keyword">if</span> plotif2==<span class="number">1</span> </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">3</span>) </span><br><span class="line">axis([<span class="number">0</span>,MM,<span class="number">0</span>,MM]) </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:MM </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:MM </span><br><span class="line"><span class="keyword">if</span> G(<span class="built_in">i</span>,<span class="built_in">j</span>)==<span class="number">1</span> </span><br><span class="line">x1=<span class="built_in">j</span><span class="number">-1</span>;y1=MM-<span class="built_in">i</span>; </span><br><span class="line">x2=<span class="built_in">j</span>;y2=MM-<span class="built_in">i</span>; </span><br><span class="line">x3=<span class="built_in">j</span>;y3=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">x4=<span class="built_in">j</span><span class="number">-1</span>;y4=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">fill([x1,x2,x3,x4],[y1,y2,y3,y4],[<span class="number">0.2</span>,<span class="number">0.2</span>,<span class="number">0.2</span>]); </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">x1=<span class="built_in">j</span><span class="number">-1</span>;y1=MM-<span class="built_in">i</span>; </span><br><span class="line">x2=<span class="built_in">j</span>;y2=MM-<span class="built_in">i</span>; </span><br><span class="line">x3=<span class="built_in">j</span>;y3=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">x4=<span class="built_in">j</span><span class="number">-1</span>;y4=MM-<span class="built_in">i</span>+<span class="number">1</span>; </span><br><span class="line">fill([x1,x2,x3,x4],[y1,y2,y3,y4],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]); </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:K </span><br><span class="line">PLK=PL(k,:); </span><br><span class="line">minPLK=<span class="built_in">min</span>(PLK); </span><br><span class="line">pos=<span class="built_in">find</span>(PLK==minPLK); </span><br><span class="line">m=pos(<span class="number">1</span>); </span><br><span class="line">ROUT=ROUTES&#123;k,m&#125;; </span><br><span class="line">LENROUT=<span class="built_in">length</span>(ROUT); </span><br><span class="line">Rx=ROUT; </span><br><span class="line">Ry=ROUT; </span><br><span class="line"><span class="keyword">for</span> ii=<span class="number">1</span>:LENROUT </span><br><span class="line">Rx(ii)=a*(<span class="built_in">mod</span>(ROUT(ii),MM)<span class="number">-0.5</span>); </span><br><span class="line"><span class="keyword">if</span> Rx(ii)==<span class="number">-0.5</span> </span><br><span class="line">Rx(ii)=MM<span class="number">-0.5</span>; </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line">Ry(ii)=a*(MM+<span class="number">0.5</span>-<span class="built_in">ceil</span>(ROUT(ii)/MM)); </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="built_in">plot</span>(Rx,Ry) </span><br><span class="line"><span class="built_in">hold</span> on </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">D</span>=<span class="title">G2D</span><span class="params">(G)</span> </span></span><br><span class="line">l=<span class="built_in">size</span>(G,<span class="number">1</span>); </span><br><span class="line">D=<span class="built_in">zeros</span>(l*l,l*l); </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:l </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:l </span><br><span class="line">        <span class="keyword">if</span> G(<span class="built_in">i</span>,<span class="built_in">j</span>)==<span class="number">0</span> </span><br><span class="line">            <span class="keyword">for</span> m=<span class="number">1</span>:l </span><br><span class="line">                <span class="keyword">for</span> n=<span class="number">1</span>:l </span><br><span class="line">                    <span class="keyword">if</span> G(m,n)==<span class="number">0</span> </span><br><span class="line">                        im=<span class="built_in">abs</span>(<span class="built_in">i</span>-m);jn=<span class="built_in">abs</span>(<span class="built_in">j</span>-n); </span><br><span class="line">                        <span class="keyword">if</span> im+jn==<span class="number">1</span>||(im==<span class="number">1</span>&amp;&amp;jn==<span class="number">1</span>) </span><br><span class="line">                        D((<span class="built_in">i</span><span class="number">-1</span>)*l+<span class="built_in">j</span>,(m<span class="number">-1</span>)*l+n)=(im+jn)^<span class="number">0.5</span>; </span><br><span class="line">                        <span class="keyword">end</span> </span><br><span class="line">                    <span class="keyword">end</span> </span><br><span class="line">                <span class="keyword">end</span> </span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br></pre></td></tr></table></figure>
<h4 id="山区地势图最优路径">山区地势图最优路径</h4>
<p>有一个山区地势图如图所示，任意设置一个起始点和终止点位置，求蚂蚁从起始点到终点之间的最优路径。</p>
<p><img src="https://img-blog.csdnimg.cn/a2b6438e921a4c5a972297c62c20aba7.png#pic_center"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">clear all</span><br><span class="line">clc</span><br><span class="line">h=[<span class="number">1800</span> <span class="number">2200</span> <span class="number">1900</span> <span class="number">2400</span> <span class="number">2300</span> <span class="number">2100</span> <span class="number">2500</span> <span class="number">2400</span> <span class="number">2700</span> <span class="number">2600</span> <span class="number">2900</span></span><br><span class="line">   <span class="number">1600</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2600</span> <span class="number">2900</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2500</span> <span class="number">2700</span> <span class="number">3000</span> <span class="number">2800</span></span><br><span class="line">   <span class="number">2100</span> <span class="number">1900</span> <span class="number">2000</span> <span class="number">1900</span> <span class="number">1700</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2500</span> <span class="number">2900</span></span><br><span class="line">   <span class="number">1700</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">1800</span> <span class="number">2000</span> <span class="number">2200</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2000</span> <span class="number">2800</span></span><br><span class="line">   <span class="number">2200</span> <span class="number">1800</span> <span class="number">2000</span> <span class="number">3100</span> <span class="number">2300</span> <span class="number">2400</span> <span class="number">1800</span> <span class="number">3100</span> <span class="number">3200</span> <span class="number">2300</span> <span class="number">2000</span></span><br><span class="line">   <span class="number">1900</span> <span class="number">2100</span> <span class="number">2200</span> <span class="number">3000</span> <span class="number">2300</span> <span class="number">3000</span> <span class="number">3500</span> <span class="number">3100</span> <span class="number">2300</span> <span class="number">2600</span> <span class="number">2500</span></span><br><span class="line">   <span class="number">1700</span> <span class="number">1400</span> <span class="number">2300</span> <span class="number">2900</span> <span class="number">2400</span> <span class="number">2800</span> <span class="number">1800</span> <span class="number">3500</span> <span class="number">2600</span> <span class="number">2000</span> <span class="number">3200</span></span><br><span class="line">   <span class="number">2300</span> <span class="number">2500</span> <span class="number">2400</span> <span class="number">3100</span> <span class="number">3000</span> <span class="number">2600</span> <span class="number">3000</span> <span class="number">2300</span> <span class="number">3000</span> <span class="number">2500</span> <span class="number">2700</span></span><br><span class="line">   <span class="number">2000</span> <span class="number">2200</span> <span class="number">2100</span> <span class="number">2000</span> <span class="number">2200</span> <span class="number">3000</span> <span class="number">2300</span> <span class="number">2500</span> <span class="number">2400</span> <span class="number">2000</span> <span class="number">2300</span></span><br><span class="line">   <span class="number">2300</span> <span class="number">2200</span> <span class="number">2000</span> <span class="number">2300</span> <span class="number">2200</span> <span class="number">2200</span> <span class="number">2200</span> <span class="number">2500</span> <span class="number">2000</span> <span class="number">2800</span> <span class="number">2700</span></span><br><span class="line">   <span class="number">2000</span> <span class="number">2300</span> <span class="number">2500</span> <span class="number">2200</span> <span class="number">2200</span> <span class="number">2000</span> <span class="number">2300</span> <span class="number">2600</span> <span class="number">2000</span> <span class="number">2500</span> <span class="number">2000</span>];</span><br><span class="line">h=h<span class="number">-1400</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">11</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">11</span></span><br><span class="line">        h1(<span class="number">2</span>*<span class="built_in">i</span><span class="number">-1</span>,<span class="built_in">j</span>)=h(<span class="built_in">i</span>,<span class="built_in">j</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">11</span></span><br><span class="line">        h1(<span class="number">2</span>*<span class="built_in">i</span>,<span class="built_in">j</span>)=(h1(<span class="number">2</span>*<span class="built_in">i</span><span class="number">-1</span>,<span class="built_in">j</span>)+h1(<span class="number">2</span>*<span class="built_in">i</span>+<span class="number">1</span>,<span class="built_in">j</span>))/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">21</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">11</span></span><br><span class="line">        h2(<span class="built_in">i</span>,<span class="number">2</span>*<span class="built_in">j</span><span class="number">-1</span>)=h1(<span class="built_in">i</span>,<span class="built_in">j</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">21</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">10</span></span><br><span class="line">        h2(<span class="built_in">i</span>,<span class="number">2</span>*<span class="built_in">j</span>)=(h2(<span class="built_in">i</span>,<span class="number">2</span>*<span class="built_in">j</span><span class="number">-1</span>)+h2(<span class="built_in">i</span>,<span class="number">2</span>*<span class="built_in">j</span>+<span class="number">1</span>))/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">z=h2;      <span class="comment">%初始地形</span></span><br><span class="line"></span><br><span class="line">x=<span class="number">1</span>:<span class="number">21</span>;</span><br><span class="line">y=<span class="number">1</span>:<span class="number">21</span>;</span><br><span class="line">[x1,y1]=<span class="built_in">meshgrid</span>(x,y);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">mesh(x1,y1,z)</span><br><span class="line">axis([<span class="number">1</span>,<span class="number">21</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">2000</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;km&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;km&#x27;</span>)</span><br><span class="line">zlabel(<span class="string">&#x27;m&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">21</span></span><br><span class="line">    information(<span class="built_in">i</span>,:,:)=<span class="built_in">ones</span>(<span class="number">21</span>,<span class="number">21</span>);     <span class="comment">%初始信息素</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%起点坐标</span></span><br><span class="line">starty=<span class="number">10</span>;</span><br><span class="line">starth=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">%终点坐标</span></span><br><span class="line">endy=<span class="number">8</span>;</span><br><span class="line">endh=<span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">%n=10;</span></span><br><span class="line">n=<span class="number">1</span>;</span><br><span class="line">m=<span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">Best=[];</span><br><span class="line">[path,information]=searchpath(n,m,information,z,starty,starth,endy,endh);  <span class="comment">%路径寻找</span></span><br><span class="line">fitness=CacuFit(path);                          <span class="comment">%适应度计算</span></span><br><span class="line">[bestfitness,bestindex]=<span class="built_in">min</span>(fitness);           <span class="comment">%最佳适应度</span></span><br><span class="line">bestpath=path(bestindex,:);</span><br><span class="line">Best=[Best;bestfitness];</span><br><span class="line"></span><br><span class="line"><span class="comment">%更新信息素</span></span><br><span class="line">rou=<span class="number">0.5</span>;</span><br><span class="line">cfit=<span class="number">100</span>/bestfitness;</span><br><span class="line">k=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:m<span class="number">-1</span></span><br><span class="line">    information(k,bestpath(<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>),bestpath(<span class="built_in">i</span>*<span class="number">2</span>))=(<span class="number">1</span>-rou)*information(k,bestpath(<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>),bestpath(<span class="built_in">i</span>*<span class="number">2</span>))+rou*cfit;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> kk=<span class="number">1</span>:<span class="number">1</span>:<span class="number">100</span></span><br><span class="line">    kk</span><br><span class="line">    [path,information]=searchpath(n,m,information,z,starty,starth,endy,endh);  <span class="comment">%路径寻找</span></span><br><span class="line">    fitness=CacuFit(path);    <span class="comment">%适应度计算</span></span><br><span class="line">    [newbestfitness,newbestindex]=<span class="built_in">min</span>(fitness);           <span class="comment">%最佳适应度</span></span><br><span class="line">    <span class="keyword">if</span> newbestfitness&lt;bestfitness</span><br><span class="line">        bestfitness=newbestfitness;</span><br><span class="line">        bestpath=path(newbestindex,:);</span><br><span class="line">    <span class="keyword">end</span>   </span><br><span class="line">    Best=[Best;bestfitness];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%更新信息素</span></span><br><span class="line">    rou=<span class="number">0.2</span>;</span><br><span class="line">    cfit=<span class="number">100</span>/bestfitness;</span><br><span class="line">    k=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:m<span class="number">-1</span></span><br><span class="line">        information(k,bestpath(<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>),bestpath(<span class="built_in">i</span>*<span class="number">2</span>))=(<span class="number">1</span>-rou)*information(k,bestpath(<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>),bestpath(<span class="built_in">i</span>*<span class="number">2</span>))+rou*cfit;</span><br><span class="line">    <span class="keyword">end</span>     </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">21</span></span><br><span class="line">    a(<span class="built_in">i</span>,<span class="number">1</span>)=bestpath(<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>);</span><br><span class="line">    a(<span class="built_in">i</span>,<span class="number">2</span>)=bestpath(<span class="built_in">i</span>*<span class="number">2</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 绘制结果图形</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(Best)</span><br><span class="line">title(<span class="string">&#x27;最佳个体适应度变化趋势&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;迭代次数&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;适应度值&#x27;</span>)</span><br><span class="line"></span><br><span class="line">k=<span class="number">1</span>:<span class="number">21</span></span><br><span class="line">x=<span class="number">1</span>:<span class="number">21</span>;</span><br><span class="line">y=<span class="number">1</span>:<span class="number">21</span>;</span><br><span class="line">[x1,y1]=<span class="built_in">meshgrid</span>(x,y);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">3</span>)</span><br><span class="line">mesh(x1,y1,z);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot3</span>(k&#x27;,a(:,<span class="number">1</span>)&#x27;,a(:,<span class="number">2</span>)&#x27;*<span class="number">200</span>,<span class="string">&#x27;k-&#x27;</span>)</span><br><span class="line">axis([<span class="number">1</span>,<span class="number">21</span>,<span class="number">1</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">2000</span>])</span><br></pre></td></tr></table></figure>
<p>适应度函数：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%计算个体适应度值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fitness</span>=<span class="title">CacuFit</span><span class="params">(path)</span></span></span><br><span class="line"><span class="comment">%path:路径</span></span><br><span class="line"><span class="comment">%fitness:路径适应度值</span></span><br><span class="line">[n,m]=<span class="built_in">size</span>(path);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">    fitness(<span class="built_in">i</span>)=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">2</span>:m/<span class="number">2</span></span><br><span class="line">        fitness(<span class="built_in">i</span>)=fitness(<span class="built_in">i</span>)+<span class="built_in">sqrt</span>(<span class="number">1</span>+(path(<span class="built_in">i</span>,<span class="built_in">j</span>*<span class="number">2</span><span class="number">-1</span>)-path(<span class="built_in">i</span>,(<span class="built_in">j</span><span class="number">-1</span>)*<span class="number">2</span><span class="number">-1</span>))^<span class="number">2</span>+(path(<span class="built_in">i</span>,<span class="built_in">j</span>*<span class="number">2</span>)-path(<span class="built_in">i</span>,(<span class="built_in">j</span><span class="number">-1</span>)*<span class="number">2</span>))^<span class="number">2</span>)+<span class="built_in">abs</span>(path(<span class="built_in">i</span>,<span class="built_in">j</span>*<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>启发值函数：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%计算每个点的启发值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qfz</span>=<span class="title">CacuQfz</span><span class="params">(nowy,nowh,oldy,oldh,endy,endh,k,z)</span></span></span><br><span class="line"><span class="comment">%nowy,nowh:现在点</span></span><br><span class="line"><span class="comment">%endy,endh:终点 </span></span><br><span class="line"><span class="comment">%oldy,oldh:上个点</span></span><br><span class="line"><span class="comment">%k:当前层数</span></span><br><span class="line"><span class="comment">%z:地形高度图</span></span><br><span class="line"><span class="keyword">if</span> z(nowy,k)&lt;nowh*<span class="number">200</span></span><br><span class="line">    S=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    S=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%D距离</span></span><br><span class="line">D=<span class="number">50</span>/(<span class="built_in">sqrt</span>(<span class="number">1</span>+(oldh*<span class="number">0.2</span>-nowh*<span class="number">0.2</span>)^<span class="number">2</span>+(nowy-oldy)^<span class="number">2</span>)+<span class="built_in">sqrt</span>((<span class="number">21</span>-k)^<span class="number">2</span>+(endh*<span class="number">0.2</span>-nowh*<span class="number">0.2</span>)^<span class="number">2</span>+(nowy-oldy)^<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">%纵向改变</span></span><br><span class="line">M=<span class="number">30</span>/(<span class="built_in">abs</span>(nowh-oldh)+<span class="number">1</span>);</span><br><span class="line">qfz=S*M*D; </span><br></pre></td></tr></table></figure>
<p>寻找路径函数：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%寻找路径</span></span><br><span class="line"><span class="comment">%n:路径条数 m分开平面数 information:信息素 z高度表</span></span><br><span class="line"><span class="comment">%starty starth 出发点</span></span><br><span class="line"><span class="comment">%endy endh 终点</span></span><br><span class="line"><span class="comment">%path 寻到路径</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[path,information]</span>=<span class="title">searchpath</span><span class="params">(n,m,information,z,starty,starth,endy,endh)</span></span></span><br><span class="line">ycMax=<span class="number">2</span>;   <span class="comment">%横向最大变动</span></span><br><span class="line">hcMax=<span class="number">2</span>;   <span class="comment">%纵向最大变动</span></span><br><span class="line">decr=<span class="number">0.8</span>;  <span class="comment">%衰减概率</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ii=<span class="number">1</span>:n</span><br><span class="line">    path(ii,<span class="number">1</span>:<span class="number">2</span>)=[starty,starth];  </span><br><span class="line">    oldpoint=[starty,starth];   <span class="comment">%当前坐标点 </span></span><br><span class="line">    <span class="comment">%k:当前层数</span></span><br><span class="line">    <span class="keyword">for</span> k=<span class="number">2</span>:m<span class="number">-1</span></span><br><span class="line">        <span class="comment">%计算所有数据点对应的适应度值</span></span><br><span class="line">        kk=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=-ycMax:ycMax</span><br><span class="line">            <span class="keyword">for</span> <span class="built_in">j</span>=-hcMax:hcMax</span><br><span class="line">                point(kk,:)=[oldpoint(<span class="number">1</span>)+<span class="built_in">i</span>,oldpoint(<span class="number">2</span>)+<span class="built_in">j</span>];</span><br><span class="line">                <span class="keyword">if</span> (point(kk,<span class="number">1</span>)&lt;<span class="number">20</span>)&amp;&amp;(point(kk,<span class="number">1</span>)&gt;<span class="number">0</span>)&amp;&amp;(point(kk,<span class="number">2</span>)&lt;<span class="number">17</span>)&amp;&amp;(point(kk,<span class="number">2</span>)&gt;<span class="number">0</span>)</span><br><span class="line">                    <span class="comment">%计算启发值</span></span><br><span class="line">                    qfz(kk)=CacuQfz(point(kk,<span class="number">1</span>),point(kk,<span class="number">2</span>),oldpoint(<span class="number">1</span>),oldpoint(<span class="number">2</span>),endy,endh,k,z);</span><br><span class="line">                    qz(kk)=qfz(kk)*information(k,point(kk,<span class="number">1</span>),point(kk,<span class="number">2</span>));</span><br><span class="line">                    kk=kk+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    qz(kk)=<span class="number">0</span>;</span><br><span class="line">                    kk=kk+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span>   </span><br><span class="line">        </span><br><span class="line">        <span class="comment">%选择下个点</span></span><br><span class="line">        sumq=qz./sum(qz);</span><br><span class="line">    </span><br><span class="line">        pick=<span class="built_in">rand</span>;</span><br><span class="line">        <span class="keyword">while</span> pick==<span class="number">0</span></span><br><span class="line">            pick=<span class="built_in">rand</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">49</span></span><br><span class="line">            pick=pick-sumq(<span class="built_in">i</span>);</span><br><span class="line">            <span class="keyword">if</span> pick&lt;=<span class="number">0</span></span><br><span class="line">                index=<span class="built_in">i</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        oldpoint=point(index,:);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">%更新信息素</span></span><br><span class="line">        information(k+<span class="number">1</span>,oldpoint(<span class="number">1</span>),oldpoint(<span class="number">2</span>))=<span class="number">0.5</span>*information(k+<span class="number">1</span>,oldpoint(<span class="number">1</span>),oldpoint(<span class="number">2</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">%路径保存</span></span><br><span class="line">        path(ii,k*<span class="number">2</span><span class="number">-1</span>:k*<span class="number">2</span>)=[oldpoint(<span class="number">1</span>),oldpoint(<span class="number">2</span>)];       </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    path(ii,<span class="number">41</span>:<span class="number">42</span>)=[endy,endh];</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/ff88c860ed8b489d8ad190d0469be90d.png#pic_center"></p>
<p><img src="https://img-blog.csdnimg.cn/225deec5f2cf4145a4bef4a371c403c3.png#pic_center"></p>
<h3 id="应用tsp问题">应用：TSP问题</h3>
<p>旅行商问题（ travelling salesman problem . TSP
）是物流领城中的典型问题，它的水胖具有十分重要的理论和现实意义。采用一定的物流配送方式，可以大大节省人力物力，完善整个物流系统。
已被广泛来用的遗传算法是旅行商问题的传统求解方法，但遗传算法收敛速度慢，具有一定的缺陷。
采用蚁群算法，充分利用蚁群算法的智能性，求解旅行商问题，并进行实例仿真。进行仿真计算的目标是，该算法能够获得旅行商问题的优化结果，平均距离和最短距离。
求解 TSP
的蚂蚁算法中，每只蚂蚁是一个独立的用于构造路线的过程，若干蚂蚁过程之间通过自适应的信息素值来交换信息，合作求解，并不断优化。这里的信息素值分布式存储在图中，与各弧相关联。
蚂蚁算法求解 TSP 的过程如下： (1）首先初始化，设迭代的次数为 NC 。初始化
NC =0。</p>
<p>(2）将 m 个蚂蚁置于 n 个顶点上。</p>
<ol start="3" type="1">
<li>m 只蚂蚁按概率函数选择下一座城市，完成各自的周游。</li>
</ol>
<p>每个蚂蚁按照状态变化规则逐步地构造一个解，即生成一条回路。蚂蚁的任务是访问所有的城市后返回到起点，生成一条回路。设蚂蚁
k 当前所在的顶点为 i ，那么，蚂蚁 k 由点 i 向点 j
移动要遵循规则而不断迁移，按不同概率来选择下一点。</p>
<p>(4）记录本次迭代最佳路线。</p>
<p>(5）全局更新信息素值。</p>
<p>应用全局信息素更新规则来改变信息素值。当所有 m 个蚂蚁生成了 m
个解，其中有一条最短路径是本代最优解，将属于这条路线上的所有弧相关联的信息素值进行更新。</p>
<p>全局信息素更新的目的是在最短路线上注人额外的信息素，即只有属于最短路线的弧上的信息素オ能得到加强，这是一个正反馈的过程，也是一个强化学习的过程。在图中各弧上，伴随着信息素的挥发，全局最短路线上各弧的信息素值得到增加。</p>
<p>(6）终止。若终止条件满足，则结束；否则 NC = NC
+1，转人步骤（2）进行下一代进化。终止条件可指定进化的代数，也可限定运行时间，或设定最短路长的下限。</p>
<p>(7）输出结果。</p>
<p>【例】设有 n 个城市 C =(1,2,…, n )，任意两个城市 i 到 j 之间的距离为
<span class="math inline">\(d_{ij}\)</span>
求一条经过每个城市的路径<span class="math inline">\(\pi＝(\pi(1),\pi(2),…\pi(
n))\)</span>，使得距离最小。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">ACOTSP</span></span></span><br><span class="line"><span class="comment">% C表示n个城市的坐标，n×2的矩阵</span></span><br><span class="line"><span class="comment">% NC_max表示最大迭代次数</span></span><br><span class="line"><span class="comment">% m表示蚂蚁个数</span></span><br><span class="line"><span class="comment">% Alpha表示表征信息素重要程度的参数</span></span><br><span class="line"><span class="comment">% Beta表示表征启发式因子重要程度的参数</span></span><br><span class="line"><span class="comment">% Rho表示信息素蒸发系数</span></span><br><span class="line"><span class="comment">% Q表示信息素增加强度系数</span></span><br><span class="line"><span class="comment">% R_best表示各代最佳路线</span></span><br><span class="line"><span class="comment">% L_best表示各代最佳路线的长度</span></span><br><span class="line">x=[<span class="number">51</span> <span class="number">27</span> <span class="number">56</span> <span class="number">21</span> <span class="number">4</span> <span class="number">6</span> <span class="number">58</span> <span class="number">71</span> <span class="number">54</span> <span class="number">53</span> <span class="number">94</span> <span class="number">18</span> <span class="number">89</span> <span class="number">33</span> <span class="number">12</span> <span class="number">25</span> <span class="number">24</span> <span class="number">58</span> <span class="number">71</span> <span class="number">94</span> <span class="number">17</span> <span class="number">38</span> <span class="number">13</span> <span class="number">82</span> <span class="number">12</span> <span class="number">58</span> <span class="number">45</span> <span class="number">11</span> <span class="number">47</span> <span class="number">4</span>]&#x27;;</span><br><span class="line">y=[<span class="number">14</span> <span class="number">81</span> <span class="number">67</span> <span class="number">92</span> <span class="number">64</span> <span class="number">19</span> <span class="number">98</span> <span class="number">18</span> <span class="number">62</span> <span class="number">69</span> <span class="number">30</span> <span class="number">54</span> <span class="number">10</span> <span class="number">46</span> <span class="number">34</span> <span class="number">18</span> <span class="number">42</span> <span class="number">69</span> <span class="number">61</span> <span class="number">78</span> <span class="number">16</span> <span class="number">40</span> <span class="number">10</span> <span class="number">7</span> <span class="number">32</span> <span class="number">17</span> <span class="number">21</span> <span class="number">26</span> <span class="number">35</span> <span class="number">90</span>]&#x27;;</span><br><span class="line">C=[x y];</span><br><span class="line">NC_max=<span class="number">50</span>;</span><br><span class="line">m=<span class="number">30</span>;</span><br><span class="line">Alpha=<span class="number">1.4</span>;</span><br><span class="line">Beta=<span class="number">2.2</span>;</span><br><span class="line">Rho=<span class="number">0.15</span>;</span><br><span class="line">Q=<span class="number">10</span>^<span class="number">6</span>;</span><br><span class="line"><span class="comment">%%%%%%%%变量初始化%%%%%%%%%%%%%%%%</span></span><br><span class="line">n=<span class="built_in">size</span>(C,<span class="number">1</span>); <span class="comment">%n表示问题的规模（城市个数）</span></span><br><span class="line">D=<span class="built_in">zeros</span>(n,n);<span class="comment">%D表示完全图的赋权邻接矩阵</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:n</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">i</span>~=<span class="built_in">j</span></span><br><span class="line">           D(<span class="built_in">i</span>,<span class="built_in">j</span>)=((C(<span class="built_in">i</span>,<span class="number">1</span>)-C(<span class="built_in">j</span>,<span class="number">1</span>))^<span class="number">2</span>+(C(<span class="built_in">i</span>,<span class="number">2</span>)-C(<span class="built_in">j</span>,<span class="number">2</span>))^<span class="number">2</span>)^<span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">           D(<span class="built_in">i</span>,<span class="built_in">j</span>)=<span class="built_in">eps</span>;      </span><br><span class="line">           <span class="comment">%i=j时不计算，应该为0，但后面的启发因子要取倒数，用eps（浮点相对精度）表示</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        D(<span class="built_in">j</span>,<span class="built_in">i</span>)=D(<span class="built_in">i</span>,<span class="built_in">j</span>);   <span class="comment">%对称矩阵</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Eta=<span class="number">1.</span>/D;                     <span class="comment">%Eta为启发因子，这里设为距离的倒数</span></span><br><span class="line">Tau=<span class="built_in">ones</span>(n,n);                <span class="comment">%Tau为信息素矩阵</span></span><br><span class="line">Tabu=<span class="built_in">zeros</span>(m,n);              <span class="comment">%存储并记录路径的生成</span></span><br><span class="line">NC=<span class="number">1</span>;                         <span class="comment">%迭代计数器，记录迭代次数</span></span><br><span class="line">R_best=<span class="built_in">zeros</span>(NC_max,n);       <span class="comment">%各代最佳路线</span></span><br><span class="line">L_best=<span class="built_in">inf</span>.*<span class="built_in">ones</span>(NC_max,<span class="number">1</span>);   <span class="comment">%各代最佳路线的长度</span></span><br><span class="line">L_ave=<span class="built_in">zeros</span>(NC_max,<span class="number">1</span>);        <span class="comment">%各代路线的平均长度</span></span><br><span class="line"><span class="keyword">while</span> NC&lt;=NC_max              <span class="comment">%停止条件之一：达到最大迭代次数，停止</span></span><br><span class="line"><span class="comment">%%%%%%%%将m只蚂蚁放到n个城市上%%%%%%%%%%%%</span></span><br><span class="line">Randpos=[];                   <span class="comment">%随即存取</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:(<span class="built_in">ceil</span>(m/n))</span><br><span class="line">    Randpos=[Randpos,randperm(n)];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Tabu(:,<span class="number">1</span>)=(Randpos(<span class="number">1</span>,<span class="number">1</span>:m))&#x27;;    </span><br><span class="line"><span class="comment">%%%%%%%%m只蚂蚁按概率函数选择下一座城市，完成各自的周游%%%%%%%%%%%%</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">2</span>:n                         <span class="comment">%所在城市不计算</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m     </span><br><span class="line">        visited=Tabu(<span class="built_in">i</span>,<span class="number">1</span>:(<span class="built_in">j</span><span class="number">-1</span>));  <span class="comment">%记录已访问的城市，避免重复访问</span></span><br><span class="line">        J=<span class="built_in">zeros</span>(<span class="number">1</span>,(n-<span class="built_in">j</span>+<span class="number">1</span>));       <span class="comment">%待访问的城市</span></span><br><span class="line">        P=J;                      <span class="comment">%待访问城市的选择概率分布</span></span><br><span class="line">        Jc=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> k=<span class="number">1</span>:n</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">length</span>(<span class="built_in">find</span>(visited==k))==<span class="number">0</span>   <span class="comment">%开始时置0</span></span><br><span class="line">           J(Jc)=k;</span><br><span class="line">           Jc=Jc+<span class="number">1</span>;            	         <span class="comment">%访问的城市个数自加1</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="comment">%下面计算待选城市的概率分布</span></span><br><span class="line">    <span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">length</span>(J)</span><br><span class="line">        P(k)=(Tau(visited(<span class="keyword">end</span>),J(k))^Alpha)*(Eta(visited(<span class="keyword">end</span>),J(k))^Beta);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">        P=P/(sum(P));</span><br><span class="line"><span class="comment">%按概率原则选取下一个城市</span></span><br><span class="line">        Pcum=cumsum(P);          <span class="comment">%cumsum，元素累加即求和</span></span><br><span class="line">        Select=<span class="built_in">find</span>(Pcum&gt;=<span class="built_in">rand</span>); <span class="comment">%若计算的概率大于原来的就选择这条路线</span></span><br><span class="line">        to_visit=J(Select(<span class="number">1</span>));</span><br><span class="line">        Tabu(<span class="built_in">i</span>,<span class="built_in">j</span>)=to_visit;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> NC&gt;=<span class="number">2</span></span><br><span class="line">   Tabu(<span class="number">1</span>,:)=R_best(NC<span class="number">-1</span>,:);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%%%%%%%%记录本次迭代最佳路线%%%%%%%%%%%%</span></span><br><span class="line">L=<span class="built_in">zeros</span>(m,<span class="number">1</span>);                        <span class="comment">%开始距离为0，m*1的列向量</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m</span><br><span class="line">    R=Tabu(<span class="built_in">i</span>,:);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:(n<span class="number">-1</span>)</span><br><span class="line">    L(<span class="built_in">i</span>)=L(<span class="built_in">i</span>)+D(R(<span class="built_in">j</span>),R(<span class="built_in">j</span>+<span class="number">1</span>));        <span class="comment">%原距离加上第j个城市到第j+1个城市的距离</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">L(<span class="built_in">i</span>)=L(<span class="built_in">i</span>)+D(R(<span class="number">1</span>),R(n));              <span class="comment">%一轮下来后走过的距离</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">L_best(NC)=<span class="built_in">min</span>(L);                   <span class="comment">%最佳距离取最小</span></span><br><span class="line">pos=<span class="built_in">find</span>(L==L_best(NC));</span><br><span class="line">R_best(NC,:)=Tabu(pos(<span class="number">1</span>),:);         <span class="comment">%此轮迭代后的最佳路线</span></span><br><span class="line">L_ave(NC)=<span class="built_in">mean</span>(L);                   <span class="comment">%此轮迭代后的平均距离</span></span><br><span class="line">NC=NC+<span class="number">1</span>;                             <span class="comment">%迭代继续</span></span><br><span class="line"><span class="comment">%%%%%%%%更新信息素%%%%%%%%%%%%%%%%</span></span><br><span class="line">Delta_Tau=<span class="built_in">zeros</span>(n,n);                <span class="comment">%开始时信息素为n*n的0矩阵</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:(n<span class="number">-1</span>)</span><br><span class="line">        Delta_Tau(Tabu(<span class="built_in">i</span>,<span class="built_in">j</span>),Tabu(<span class="built_in">i</span>,<span class="built_in">j</span>+<span class="number">1</span>))=Delta_Tau(Tabu(<span class="built_in">i</span>,<span class="built_in">j</span>),Tabu(<span class="built_in">i</span>,<span class="built_in">j</span>+<span class="number">1</span>))+Q/L(<span class="built_in">i</span>);           </span><br><span class="line"><span class="comment">%此次循环在路径（i，j）上的信息素增量</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">Delta_Tau(Tabu(<span class="built_in">i</span>,n),Tabu(<span class="built_in">i</span>,<span class="number">1</span>))=Delta_Tau(Tabu(<span class="built_in">i</span>,n),Tabu(<span class="built_in">i</span>,<span class="number">1</span>))+Q/L(<span class="built_in">i</span>);</span><br><span class="line"><span class="comment">%此次循环在整个路径上的信息素增量</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Tau=(<span class="number">1</span>-Rho).*Tau+Delta_Tau;      <span class="comment">%考虑信息素挥发，更新后的信息素</span></span><br><span class="line"><span class="comment">%%%%%%%%禁忌表清零%%%%%%%%%%%%</span></span><br><span class="line">Tabu=<span class="built_in">zeros</span>(m,n);                 <span class="comment">%%直到最大迭代次数</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%%%%%%%%结果%%%%%%%%%%%%</span></span><br><span class="line">Pos=<span class="built_in">find</span>(L_best==<span class="built_in">min</span>(L_best));   <span class="comment">%找到最佳路径（非0为真）</span></span><br><span class="line">Shortest_Route=R_best(Pos(<span class="number">1</span>),:)  <span class="comment">%最大迭代次数后最佳路径</span></span><br><span class="line">Shortest_Length=L_best(Pos(<span class="number">1</span>))   <span class="comment">%最大迭代次数后最短距离</span></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);                  <span class="comment">%绘制第一个子图形</span></span><br><span class="line">DrawRoute(C,Shortest_Route);     <span class="comment">%画路线图的子函数</span></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);                  <span class="comment">%绘制第二个子图形</span></span><br><span class="line"><span class="built_in">plot</span>(L_best);</span><br><span class="line"><span class="built_in">hold</span> on                        </span><br><span class="line"><span class="built_in">plot</span>(L_ave,<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;平均距离和最短距离&#x27;</span>)      </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DrawRoute</span><span class="params">(C,R)</span></span></span><br><span class="line"><span class="comment">%画路线图的子函数</span></span><br><span class="line">N=<span class="built_in">length</span>(R);</span><br><span class="line"><span class="built_in">scatter</span>(C(:,<span class="number">1</span>),C(:,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([C(R(<span class="number">1</span>),<span class="number">1</span>),C(R(N),<span class="number">1</span>)],[C(R(<span class="number">1</span>),<span class="number">2</span>),C(R(N),<span class="number">2</span>)],<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="keyword">for</span> ii=<span class="number">2</span>:N</span><br><span class="line">    <span class="built_in">plot</span>([C(R(ii<span class="number">-1</span>),<span class="number">1</span>),C(R(ii),<span class="number">1</span>)],[C(R(ii<span class="number">-1</span>),<span class="number">2</span>),C(R(ii),<span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>);</span><br><span class="line">    <span class="built_in">hold</span> on</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">title(<span class="string">&#x27;TSP问题优化结果 &#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/f5d49de55f294d8882b502e68007dbd3.png#pic_center"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/26/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/gcd(%E8%A3%B4%E8%9C%80%E5%AE%9A%E7%90%86)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/26/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/gcd(%E8%A3%B4%E8%9C%80%E5%AE%9A%E7%90%86)/" itemprop="url">牛客ACM题单：gcd(裴蜀定理)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-26T00:00:00+08:00">
                2022-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="晨跑"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/14503">晨跑</a></h2>
<p>求 a , b , c 的最小公倍数。</p>
<ul>
<li>辗转相减法（更相减损术）</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll ;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll a, ll b)</span></span>&#123; <span class="comment">// 辗转相减法</span></span><br><span class="line">    ll ta = a ;</span><br><span class="line">    ll tb = b ;</span><br><span class="line">    <span class="keyword">while</span>(a != b)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a &gt; b) a -= b ;</span><br><span class="line">        <span class="keyword">else</span> b -= a ;</span><br><span class="line">    &#125; <span class="comment">// 此时 a == b == 最大公因数</span></span><br><span class="line">    <span class="keyword">return</span> (ta * tb) / a ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll a, b, c ;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c ;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(<span class="built_in">solve</span>(a,b),c) &lt;&lt; endl ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然三者数据量都是 1e5，
但是假如三个1e5互质，结果会超INT_MAX，所以还是需要用 long long 的。</p>
<ul>
<li>辗转相除法（欧几里得）</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll ;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll a, ll b)</span></span>&#123; <span class="comment">// 辗转相除法</span></span><br><span class="line">    ll ta = a ;</span><br><span class="line">    ll tb = b ;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; b) <span class="built_in">swap</span>(a,b) ;</span><br><span class="line">    <span class="keyword">while</span>(b)&#123;</span><br><span class="line">        ll t = b ;</span><br><span class="line">        b = a % b ;</span><br><span class="line">        a = t ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (ta * tb) / a ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll a, b, c ;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c ;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(<span class="built_in">solve</span>(a,b),c) &lt;&lt; endl ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>基于公式 <code>gcd(a,b) = gcd(b,a%b)</code>。</p>
<h2 id="gcd"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/15425">gcd</a></h2>
<p>求 a, b 的最大公因数，最小公倍数。数据范围增加到 1e18 。</p>
<p>按照上题做法过
80%，<code>mi = m / ma * n ;</code>这里先乘再除会超限，所以先除再乘。</p>
<ul>
<li>AC</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll ;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll a, ll b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; b) <span class="built_in">swap</span>(a,b) ;</span><br><span class="line">    <span class="keyword">while</span>(b)&#123;</span><br><span class="line">        ll t = b ;</span><br><span class="line">        b = a % b ;</span><br><span class="line">        a = t ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll m ;</span><br><span class="line">    ll n ;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; m &gt;&gt; n)&#123;</span><br><span class="line">        ll ma = <span class="built_in">solve</span>(m,n) ;</span><br><span class="line">        ll mi = m / ma * n ;</span><br><span class="line">        cout &lt;&lt; ma &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; mi &lt;&lt; endl ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三棱锥"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/15705">三棱锥</a></h2>
<p>在边为k三棱锥里整数点数的推导： <span class="math display">\[
Cnt = \sum_{i=1}^{k}{\frac{n(n+1)}{2}}
= \frac{1}{2} \sum_{i=1}^{k}{(n + n^2)}
= \frac{1}{2}(\frac{k(k+1)}{2} + \frac{k(k+1)(2k+1)}{6})
= \frac{1}{6} k(k+1)(k+2)
\]</span></p>
<ul>
<li>AC</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> t,k,m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cin &gt;&gt; t ;</span><br><span class="line">	<span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		cin &gt;&gt; k &gt;&gt; m ;</span><br><span class="line">		<span class="type">long</span> <span class="type">long</span>  ans = <span class="number">1LL</span> * (k + <span class="number">3</span>) * (k + <span class="number">2</span>) % (m * <span class="number">6</span>) ;</span><br><span class="line">		ans = ans * (k + <span class="number">1</span>) % (m * <span class="number">6</span>) / <span class="number">6</span> ;</span><br><span class="line">		cout &lt;&lt; ans &lt;&lt; endl ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接<code>(k+1)*(k+2)*(k+3)</code>会爆<code>ll</code>，所以要多做一次取模。</p>
<p>同时注意到，<code>(k+1)*(k+2)*(K+3) % 6 == 0</code>，于是与<code>m * 6</code>同余，对<code>(m*6)</code>取模，否则依然会爆<code>longlong</code>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/19/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/%E8%B4%AA%E5%BF%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/19/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/%E8%B4%AA%E5%BF%83/" itemprop="url">牛客ACM题单：DP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-19T00:00:00+08:00">
                2022-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="牛牛和牛妹"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21669">牛牛和牛妹</a></h2>
<p>只需要留一条最短路的点数，判断所有去掉的点的总数奇偶性即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n ; cin &gt;&gt; n ;</span><br><span class="line">    <span class="type">int</span> m ; cin &gt;&gt; m ;</span><br><span class="line">    <span class="type">int</span> dot = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt; m ; j ++)&#123;</span><br><span class="line">            <span class="type">char</span> c ; cin &gt;&gt; c ;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;.&#x27;</span>) dot ++ ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dot -= n + m - <span class="number">1</span> ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(dot % <span class="number">2</span> == <span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;niumei&quot;</span> &lt;&lt; endl ;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;niuniu&quot;</span> &lt;&lt; endl ;    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="牛牛的朋友"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21545">牛牛的朋友</a></h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">55</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(a+<span class="number">1</span>,a+<span class="number">1</span>+n);</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    cin &gt;&gt; x;</span><br><span class="line">    <span class="type">int</span> ans=a[n]-a[<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> left,right;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        left=<span class="built_in">min</span>(a[<span class="number">1</span>]+x,a[i+<span class="number">1</span>]-x);</span><br><span class="line">        right=<span class="built_in">max</span>(a[n]-x,a[i]+x);</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,right-left);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="两个机器人"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21742">两个机器人</a></h2>
<ul>
<li>答案错误，通过70%</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, vector&lt;<span class="type">int</span>&gt; x, vector&lt;<span class="type">int</span>&gt; y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; x.<span class="built_in">size</span>() ; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a == x[i] &amp;&amp; b == y[i])&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> x1, y1, x2, y2 ;</span><br><span class="line">    cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 ;</span><br><span class="line">    string s ;</span><br><span class="line">    cin &gt;&gt; s ;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; x ;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; y ;</span><br><span class="line">    x.<span class="built_in">emplace_back</span>(x1) ;</span><br><span class="line">    y.<span class="built_in">emplace_back</span>(y1) ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; s.<span class="built_in">size</span>() ; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;L&#x27;</span>)&#123;</span><br><span class="line">            x1 -- ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;R&#x27;</span>)&#123;</span><br><span class="line">            x1 ++ ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;U&#x27;</span>)&#123;</span><br><span class="line">            y1 ++ ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;D&#x27;</span>)&#123;</span><br><span class="line">            y1 -- ;</span><br><span class="line">        &#125;</span><br><span class="line">        x.<span class="built_in">emplace_back</span>(x1) ;</span><br><span class="line">        y.<span class="built_in">emplace_back</span>(y1) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check</span>(x2,y2,x,y))&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Explosion&quot;</span> &lt;&lt; endl ;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; s.<span class="built_in">size</span>() ; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;L&#x27;</span>)&#123;</span><br><span class="line">            x2 -- ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;R&#x27;</span>)&#123;</span><br><span class="line">            x2 ++ ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;U&#x27;</span>)&#123;</span><br><span class="line">            y2 ++ ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;D&#x27;</span>)&#123;</span><br><span class="line">            y2 -- ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(x2,y2,x,y))&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Explosion&quot;</span> &lt;&lt; endl ;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Safe&quot;</span> &lt;&lt; endl ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于机器人忽视了一部分指令，所以最后的路线也会被改变。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x1,x2,y1,y2,x=<span class="number">0</span>,y=<span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> a[<span class="number">10000</span>];</span><br><span class="line">    cin &gt;&gt; a ;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;U&#x27;</span>||a[i]==<span class="string">&#x27;D&#x27;</span>)y++;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;L&#x27;</span>||a[i]==<span class="string">&#x27;R&#x27;</span>)x++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> x3 = <span class="built_in">abs</span>(x1-x2);</span><br><span class="line">    <span class="type">int</span> y3 = <span class="built_in">abs</span>(y1-y2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( y&gt;=y3 &amp;&amp; x&gt;=x3 ) cout &lt;&lt; <span class="string">&quot;Explosion&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span>  cout &lt;&lt; <span class="string">&quot;Safe&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="牛牛的背包"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21621">牛牛的背包</a></h2>
<ul>
<li>答案错误 49.1%</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">55</span> ;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n ;</span><br><span class="line">    cin &gt;&gt; n ;</span><br><span class="line">    <span class="type">int</span> t[N] ;</span><br><span class="line">    <span class="type">int</span> v[N] ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; t[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; type ;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span> ;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">0</span> ;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">        <span class="type">int</span> tx = x ;</span><br><span class="line">        <span class="type">int</span> ty = y ;</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt; (<span class="type">int</span>)type.<span class="built_in">size</span>() ; j ++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(type[j] == t[i]) <span class="keyword">break</span>;</span><br><span class="line">            cnt ++ ;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(cnt == (<span class="type">int</span>)type.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            tx ++ ; <span class="comment">// 当前状态被选中后，再放入已选种类中</span></span><br><span class="line">        &#125;</span><br><span class="line">        ty += v[i] ;</span><br><span class="line">        <span class="type">int</span> tans = tx * ty ;</span><br><span class="line">        <span class="keyword">if</span>(tans &gt; ans)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tx != x)&#123;</span><br><span class="line">                type.<span class="built_in">emplace_back</span>(t[i]) ;</span><br><span class="line">            &#125;</span><br><span class="line">            x = tx ;</span><br><span class="line">            y = ty ;</span><br><span class="line">            ans = tans ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>DFS</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std ;</span><br><span class="line">const int N = 55 ;</span><br><span class="line">int ans = 0 ;</span><br><span class="line">int t[N] ;</span><br><span class="line">int v[N] ;</span><br><span class="line">int n ;</span><br><span class="line"></span><br><span class="line">void dfs(int i, int a, int x, int y, vector&lt;int&gt;&amp; type)&#123;</span><br><span class="line">    if(i == n)&#123;</span><br><span class="line">        ans = max(ans,a) ;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dfs(i+1,a,x,y,type) ;</span><br><span class="line">    </span><br><span class="line">    int cnt = 0 ;</span><br><span class="line">    for(int j = 0 ; j &lt; (int)type.size() ; j ++)&#123;</span><br><span class="line">        if(type[j] == t[i]) break;</span><br><span class="line">        cnt ++ ;</span><br><span class="line">    &#125;</span><br><span class="line">    int flag = 0 ;</span><br><span class="line">    if(cnt == (int)type.size()) &#123;</span><br><span class="line">        x ++ ;</span><br><span class="line">        type.emplace_back(t[i]) ;</span><br><span class="line">        flag = 1 ;</span><br><span class="line">    &#125;</span><br><span class="line">    y += v[i] ;</span><br><span class="line">    a += x * y ;</span><br><span class="line">    dfs(i+1,a,x,y,type) ;</span><br><span class="line">//     a -= x*y ;</span><br><span class="line">//     y -= v[i] ;</span><br><span class="line">//     if(flag == 1)&#123;</span><br><span class="line">//         x -- ;</span><br><span class="line">//         type.pop_back() ;</span><br><span class="line">//     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    cin &gt;&gt; n ;</span><br><span class="line">    int a = 0 ;</span><br><span class="line">    vector&lt;int&gt; type ;</span><br><span class="line">    for(int i = 0 ; i &lt; n ; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; t[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i = 0 ; i &lt; n ; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    int x = 0 ;</span><br><span class="line">    int y = 0 ;</span><br><span class="line">    dfs(0,a,x,y,type) ;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl ;</span><br><span class="line">    </span><br><span class="line">    return 0 ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有错，回头再做。</p>
<ul>
<li>AC</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">commodity</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> type;</span><br><span class="line">    <span class="type">int</span> taste;</span><br><span class="line">    <span class="type">int</span> flag;a</span><br><span class="line">&#125;com[<span class="number">55</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">check</span><span class="params">(<span class="type">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(com[i].type==com[j].type)</span><br><span class="line">            com[i].flag=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cmp</span><span class="params">(commodity com1,commodity com2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> com1.taste&lt;com2.taste;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line">    <span class="built_in">memset</span>(com,<span class="number">0</span>,<span class="built_in">sizeof</span>(commodity)*<span class="number">55</span>);</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;com[i].type;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;com[i].taste;</span><br><span class="line">    <span class="built_in">sort</span>(com,com+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(com[i].taste&gt;=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">             j=i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x=<span class="number">0</span>,y=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=j;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(com[i].flag==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x++;</span><br><span class="line">            <span class="built_in">check</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        y+=com[i].taste;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans,temp=<span class="number">0</span>;</span><br><span class="line">    ans=x*y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=j<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x1,y1;</span><br><span class="line">        x1=x;y1=y;</span><br><span class="line">        <span class="keyword">if</span>(com[i].flag==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x1++;</span><br><span class="line">            <span class="built_in">check</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        y1+=com[i].taste;</span><br><span class="line">        temp=x1*y1;</span><br><span class="line">        <span class="keyword">if</span>(temp&gt;ans)</span><br><span class="line">        &#123;</span><br><span class="line">            ans=temp;</span><br><span class="line">            x=x1;</span><br><span class="line">            y=y1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/12/ENG/TED-EDU/The%20mystery%20of%20motion%20sickness/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/12/ENG/TED-EDU/The%20mystery%20of%20motion%20sickness/" itemprop="url">TED-ED The mystery of motion sickness</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-12T00:00:00+08:00">
                2022-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ENG/" itemprop="url" rel="index">
                    <span itemprop="name">ENG</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Gf4y1y7wc?p=33">The
mystery of motion sickness 晕车</a></p>
<p>Can u <strong>read in</strong> the car? <strong>If</strong> so,
consider <strong>yourself</strong> pretty lucky. For <strong>about
one-third</strong> of the population <strong>looking at a book
while</strong> moving <strong>along</strong> in a car
<strong>or</strong> a boat <strong>or</strong> train <strong>or</strong>
plane <strong>quickly makes them sick to their</strong> stomach.</p>
<p>But why we can <strong>get motion sickness</strong> in the first
place ？【但是首先，我们为什么会有这种“晕车”呢】</p>
<p>Well, believe it or not, scientists are exactly sure the most
<strong>common theory</strong> has <strong>to do with mismatched sensory
signals</strong>.【大多数理论和感官讯号错配有关】</p>
<p>When u travel in a car, your body is getting <strong>two</strong>
very different messages. Your eyes are seeing the inside of a
<strong>vehicle</strong> which doesnt <strong>seem to</strong> be
moving.</p>
<p>Meanwhile your ear is exactly telling ur brain <strong>u r
accelerating</strong>【加速】. Your ear actually has another important
function besides hearing.</p>
<p>In its <strong>innermost</strong> part lies a group of structures
known as the <strong>vestibular system</strong>【前庭系统】
<strong>which</strong> gives us <strong>our sense of</strong> balance
and movement.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/12/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/DP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/12/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/DP/" itemprop="url">牛客ACM题单：DP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-12T00:00:00+08:00">
                2022-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="被3整除的子序列"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21302">被3整除的子序列</a></h2>
<p>给你一个长度为50的数字串,问你有多少个子序列构成的数字可以被3整除。答案对1e9+7取模。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e9</span> + <span class="number">7</span> ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	string str ;</span><br><span class="line">	cin &gt;&gt; str ;</span><br><span class="line">	<span class="type">long</span> <span class="type">long</span> a[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125; ; <span class="comment">// 记录余数为0，1，2的个数</span></span><br><span class="line">	<span class="type">int</span> len = str.<span class="built_in">size</span>() ;</span><br><span class="line">	<span class="type">int</span> s[len] ;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; len ; i ++)&#123;</span><br><span class="line">		s[i] = (str[i] - <span class="string">&#x27;0&#x27;</span>) % <span class="number">3</span> ; <span class="comment">// 每一位对3取模</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 所有位上只有0，1，2三种可能</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; len ; i ++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i == <span class="number">0</span>) a[s[<span class="number">0</span>]] ++ ;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">long</span> <span class="type">long</span> m0 = a[<span class="number">0</span>], m1 = a[<span class="number">1</span>], m2 = a[<span class="number">2</span>];</span><br><span class="line">			a[(s[i] + <span class="number">1</span>) % <span class="number">3</span>] += m1 ;</span><br><span class="line">			a[(s[i] + <span class="number">2</span>) % <span class="number">3</span>] += m2 ;</span><br><span class="line">			a[(s[i] + <span class="number">3</span>) % <span class="number">3</span>] += m0 ;</span><br><span class="line">			a[s[i]] ++ ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; a[<span class="number">0</span>] % N ;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>考虑到能被3整除的数的性质：各位上的数字和能被3整除。</p>
<p>所以这题用动态规划实际上每一次更新被3除后余数为0，1，2的数的个数，最后输出余数为0的个数。</p>
<h2 id="删括号"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21303">删括号</a></h2>
<p>给你一个合法的括号序列s1，每次你可以删除一个"()"。你可以删除0个或者多个"()"。求能否删成另一个括号序列s2。</p>
<p>根本不会做，甚至题解看了好久才勉强理解一些。</p>
<p><code>bool dp[i][j][k]</code>用这样一个bool类型来记录s的前i个字符，t的前j个字符，s相比于t多出k个左括号。<code>dp[i][j][k] == true</code>意味着，在当前状态下s和t可以通过删除部分字符相等。那么记<code>len1 = s.size()</code>，<code>len2 = t.size()</code>，目标则是检测<code>dp[len1 - 1][len2 - 1][0]</code>是否等于true。</p>
<p>在此定义前提下考虑四种情况，假设<code>dp[i][j][k] = true</code>：</p>
<ol type="1">
<li><code>s[i+1] == '(' &amp;&amp; t[j+1] == '('</code>。此时<code>dp[i+1][j+1][k] = true</code>或<code>dp[i+1][j][k+1] = true</code>。</li>
<li><code>s[i+1] == ')' &amp;&amp; t[j+1] == ')'</code>。此时<code>dp[i+1][j+1][k] = true</code>或<code>dp[i+1][j][k-1] = true</code>。</li>
<li><code>s[i+1] == '(' &amp;&amp; t[j+1] == ')'</code>。此时<code>dp[i+1][j][k+1] = true</code>。</li>
<li><code>s[i+1] == ')' &amp;&amp; t[j+1] == '('</code>。此时<code>dp[i+1][j][k-1] = true</code>。</li>
</ol>
<p>注意到：</p>
<ol type="1">
<li>实现<code>dp[i+1][j][k-1] = true</code>前，要保证<code>k&gt;0</code>。</li>
<li>实现<code>dp[i+1][j+1][k] = true</code>时，必须在<code>s[i+1] == t[j+1]</code>的基础上满足<code>k == 0</code>。因为题目所要求的删除括号是连在一起的<code>()</code>，不允许中间空格别的字符。</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> s[<span class="number">105</span>],t[<span class="number">105</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span>,s+<span class="number">1</span>,t+<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> len1 = <span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> len2 = <span class="built_in">strlen</span>(t+<span class="number">1</span>);</span><br><span class="line">    <span class="type">bool</span> dp[<span class="number">105</span>][<span class="number">105</span>][<span class="number">55</span>];</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt;= len1 ; i ++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt;= len2 ; j ++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span> ; k &lt; len1/<span class="number">2</span> ; k ++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[i][j][k])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(k == <span class="number">0</span> &amp;&amp; s[i+<span class="number">1</span>] == t[j+<span class="number">1</span>]) dp[i+<span class="number">1</span>][j+<span class="number">1</span>][<span class="number">0</span>] = <span class="literal">true</span> ;</span><br><span class="line">                    <span class="keyword">if</span>(s[i+<span class="number">1</span>] == <span class="string">&#x27;(&#x27;</span>) dp[i+<span class="number">1</span>][j][k+<span class="number">1</span>] = <span class="literal">true</span> ;</span><br><span class="line">                    <span class="keyword">if</span>(k &gt; <span class="number">0</span> &amp;&amp; s[i+<span class="number">1</span>] == <span class="string">&#x27;)&#x27;</span>) dp[i+<span class="number">1</span>][j][k<span class="number">-1</span>] = <span class="literal">true</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dp[len1][len2][<span class="number">0</span>]) cout &lt;&lt; <span class="string">&quot;Possible&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Impossible&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有一个坑，<code>scanf("%s%s",s+1,t+1);</code>，如果直接<code>cin &gt;&gt; s &gt;&gt; t</code>那么当从i
= 0 , j = 0
开始操作时，第一个字符就没有判断，所以要把字符全都后挪一位。</p>
<h2 id="美丽序列"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/21313">美丽序列</a></h2>
<p>状态之多，近似于暴力枚举了。把所有的状态记录下来，从上一个状态推导当前状态。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> ll N = <span class="number">45</span>, M = <span class="number">1605</span>, L = <span class="number">3</span> ;</span><br><span class="line"><span class="type">const</span> ll mod = <span class="number">1e9</span>+<span class="number">7</span> ;</span><br><span class="line">ll a[N];</span><br><span class="line">ll dp[N][N][L][M]; <span class="comment">// dp[i][j][l][k], 到了第i个数值是j位于递减序列中的第l个总和为k的数列有多少个</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n ;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; a[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(a[<span class="number">1</span>]==<span class="number">-1</span>)&#123; <span class="comment">// 第一个数是-1，第1个数值是i(0~40)位于递减序列中的第1个总和为i(0~40)的数列</span></span><br><span class="line">       <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">40</span>;i++)&#123; </span><br><span class="line">           dp[<span class="number">1</span>][i][<span class="number">1</span>][i]=<span class="number">1</span> ;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> dp[<span class="number">1</span>][a[<span class="number">1</span>]][<span class="number">1</span>][a[<span class="number">1</span>]]=<span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">2</span> ; i &lt;= n ; i ++)&#123; <span class="comment">// 数列第i个数</span></span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">-1</span>)&#123; <span class="comment">// 不确定</span></span><br><span class="line">            <span class="keyword">for</span>(ll j = <span class="number">0</span> ; j &lt;= <span class="number">40</span> ; j ++)&#123; <span class="comment">// 枚举当前哪个数</span></span><br><span class="line">                <span class="keyword">for</span>(ll lj = <span class="number">0</span> ; lj &lt;= <span class="number">40</span> ; lj ++)&#123; <span class="comment">// 枚举上个数是哪个数</span></span><br><span class="line">                    <span class="keyword">for</span>(ll k = j*(i<span class="number">-1</span>) ; k &lt;= <span class="number">1600</span>-j ; k ++)&#123; <span class="comment">// 枚举可行的前i-1个数的sum，由于要求小于等于前i-1个数的AVG，所以最小是j*(i-1)，小于等于max值减当前值</span></span><br><span class="line">                        <span class="keyword">if</span>(j&gt;=lj) <span class="comment">// 假设当前值大于上一个的值</span></span><br><span class="line">                            dp[i][j][<span class="number">1</span>][k+j] = (dp[i][j][<span class="number">1</span>][k+j] + dp[i<span class="number">-1</span>][lj][<span class="number">1</span>][k] + dp[i<span class="number">-1</span>][lj][<span class="number">2</span>][k]) % mod; <span class="comment">// 上一个数的所有可能（递减的第一个和第二个）累加</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="comment">// 假如小于等于上一个值</span></span><br><span class="line">                            dp[i][j][<span class="number">2</span>][k+j] = (dp[i][j][<span class="number">2</span>][k+j] + dp[i<span class="number">-1</span>][lj][<span class="number">1</span>][k]) % mod; <span class="comment">// 此时上一个数不会是递减的第二个</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123; <span class="comment">// 确定值，不需要枚举当前的数</span></span><br><span class="line">            <span class="keyword">for</span>(ll lj = <span class="number">0</span> ; lj &lt;= <span class="number">40</span> ; lj ++)&#123; <span class="comment">// 枚举上个数是哪个数</span></span><br><span class="line">                <span class="keyword">for</span>(ll k = a[i]*(i<span class="number">-1</span>) ; k &lt;= <span class="number">1600</span>-a[i] ; k ++)&#123; <span class="comment">// 枚举可行的sum</span></span><br><span class="line">                    <span class="keyword">if</span>(a[i] &gt;= lj) <span class="comment">// 假设当前值大于上一个的值</span></span><br><span class="line">                        dp[i][a[i]][<span class="number">1</span>][k+a[i]] = (dp[i][a[i]][<span class="number">1</span>][k+a[i]] + dp[i<span class="number">-1</span>][lj][<span class="number">1</span>][k] + dp[i<span class="number">-1</span>][lj][<span class="number">2</span>][k]) % mod;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        dp[i][a[i]][<span class="number">2</span>][k+a[i]] = (dp[i][a[i]][<span class="number">2</span>][k+a[i]] + dp[i<span class="number">-1</span>][lj][<span class="number">1</span>][k]) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll j = <span class="number">0</span> ; j &lt;= <span class="number">1600</span> ; j ++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i = <span class="number">0</span> ; i &lt;= <span class="number">40</span> ; i ++)&#123; <span class="comment">// 最后一位所有数值所有总和的个数的和</span></span><br><span class="line">            ans = (ans + dp[n][i][<span class="number">1</span>][j]) % mod;</span><br><span class="line">            ans = (ans + dp[n][i][<span class="number">2</span>][j]) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/10/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/%E7%89%9B%E5%AE%A2%E5%85%A5%E9%97%A8%E9%A2%98%E5%8D%95%EF%BC%9A%E6%A8%A1%E6%8B%9F%E3%80%81%E6%9E%9A%E4%B8%BE%E4%B8%8E%E8%B4%AA%E5%BF%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/10/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E7%89%9B%E5%AE%A2/%E7%89%9B%E5%AE%A2%E5%85%A5%E9%97%A8%E9%A2%98%E5%8D%95%EF%BC%9A%E6%A8%A1%E6%8B%9F%E3%80%81%E6%9E%9A%E4%B8%BE%E4%B8%8E%E8%B4%AA%E5%BF%83/" itemprop="url">牛客入门题单：模拟、枚举与贪心</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-10T00:00:00+08:00">
                2022-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题单模拟枚举与贪心"><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960?from=acdiscuss#question">题单：模拟、枚举与贪心</a></h1>
<p>2021秋季算法入门班第一章习题</p>
<h2 id="noip2007字符串的展开">1001 <a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960/1001">NOIP2007字符串的展开</a></h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> p1, p2, p3, i, j, k, l;</span><br><span class="line">    <span class="type">char</span> s[<span class="number">1000</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;p1, &amp;p2, &amp;p3);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s);</span><br><span class="line">    l = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, s[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&#x27;-&#x27;</span> &amp;&amp; (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;9&#x27;</span>) || (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;z&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i + <span class="number">1</span>] &lt;= s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, s[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//逆向</span></span><br><span class="line">                <span class="keyword">if</span> (p3 == <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (j = s[i + <span class="number">1</span>] - <span class="number">1</span>; j &gt;= s[i - <span class="number">1</span>] + <span class="number">1</span>; j--) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (k = <span class="number">1</span>; k &lt;= p2; k++) &#123;</span><br><span class="line">                            <span class="comment">//只输出*号</span></span><br><span class="line">                            <span class="keyword">if</span> (p1 == <span class="number">3</span>) &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//输出数字</span></span><br><span class="line">                            <span class="keyword">else</span> <span class="keyword">if</span> (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i - <span class="number">1</span>] &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//输出字母需要分大小写问题</span></span><br><span class="line">                            <span class="keyword">else</span> <span class="keyword">if</span> (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;z&#x27;</span>) &#123;</span><br><span class="line">                                <span class="comment">//小写</span></span><br><span class="line">                                <span class="keyword">if</span> (p1 == <span class="number">1</span>)</span><br><span class="line">                                    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j);</span><br><span class="line">                                <span class="comment">//大写</span></span><br><span class="line">                                <span class="keyword">if</span> (p1 == <span class="number">2</span>)</span><br><span class="line">                                    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j + <span class="string">&#x27;A&#x27;</span> - <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//正向输出</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (p3 == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (j = s[i - <span class="number">1</span>] + <span class="number">1</span>; j &lt;= s[i + <span class="number">1</span>] - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (k = <span class="number">1</span>; k &lt;= p2; k++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (p1 == <span class="number">3</span>) &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> <span class="keyword">if</span> (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i - <span class="number">1</span>] &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> <span class="keyword">if</span> (s[i - <span class="number">1</span>] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;z&#x27;</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (p1 == <span class="number">1</span>)</span><br><span class="line">                                    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j);</span><br><span class="line">                                <span class="keyword">if</span> (p1 == <span class="number">2</span>)</span><br><span class="line">                                    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j + <span class="string">&#x27;A&#x27;</span> - <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//为减号时且两边是其他标点符号</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, s[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>纯纯模拟。</p>
<p>## 1002 <a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960/1002">NOIP2017时间复杂度</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxl=<span class="number">105</span>;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> t,l,w;</span><br><span class="line">string o;</span><br><span class="line">string code[maxl];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sread</span><span class="params">(<span class="type">int</span> &amp;x,string c)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> len=c.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">while</span>(c[x]&lt;<span class="string">&#x27;0&#x27;</span> || c[x]&gt;<span class="string">&#x27;9&#x27;</span>&amp;&amp;x&lt;c.<span class="built_in">size</span>()) &#123;</span><br><span class="line">        <span class="keyword">if</span>(c[x]==<span class="string">&#x27;n&#x27;</span>)&#123;</span><br><span class="line">            ++x;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1000000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(c[x]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; c[x]&lt;=<span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">        res*=<span class="number">10</span>;res+=c[x]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        ++x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">geto</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>,x=<span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> len=o.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span>(o[<span class="number">2</span>]==<span class="string">&#x27;n&#x27;</span>) res=<span class="built_in">sread</span>(x,o);</span><br><span class="line">    <span class="keyword">else</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>,now=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> a,b,x;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="type">int</span> flag=<span class="number">-1</span>;</span><br><span class="line">    <span class="type">bool</span> ins[<span class="number">26</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">bool</span> ef[<span class="number">26</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=l;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(code[i][<span class="number">0</span>]==<span class="string">&#x27;F&#x27;</span>) &#123;</span><br><span class="line">            <span class="type">int</span> k=code[i][<span class="number">2</span>]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(ins[k]) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            s.<span class="built_in">push</span>(k);ins[k]=<span class="literal">true</span>;</span><br><span class="line">            x=<span class="number">4</span>;</span><br><span class="line">            a=<span class="built_in">sread</span>(x,code[i]);b=<span class="built_in">sread</span>(x,code[i]);</span><br><span class="line">            <span class="comment">//printf(&quot;a:%d  b:%d\n&quot;,a,b);</span></span><br><span class="line">            <span class="keyword">if</span>(b-a&gt;<span class="number">1000</span>) &#123;</span><br><span class="line">                <span class="comment">//cout&lt;&lt;&quot;##&quot;&lt;&lt;(char)(k+&#x27;a&#x27;)&lt;&lt;&quot;##&quot;&lt;&lt;endl;</span></span><br><span class="line">                <span class="keyword">if</span>(flag==<span class="number">-1</span>) &#123;</span><br><span class="line">                    now++;</span><br><span class="line">                    res=<span class="built_in">max</span>(res,now);</span><br><span class="line">                    ef[k]=<span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(a&gt;b) &#123;</span><br><span class="line">                <span class="keyword">if</span>(flag==<span class="number">-1</span>) flag=k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(code[i][<span class="number">0</span>]==<span class="string">&#x27;E&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            <span class="type">int</span> k=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();ins[k]=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(flag==k) flag=<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">if</span>(ef[k]) &#123;</span><br><span class="line">                ef[k]=<span class="literal">false</span>;</span><br><span class="line">                now--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;s.txt&quot;,&quot;w&quot;,stdout);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="type">int</span> ww;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d &quot;</span>,&amp;l); <span class="built_in">getline</span>(cin,o);</span><br><span class="line">        w=<span class="built_in">geto</span>();</span><br><span class="line">        <span class="comment">//printf(&quot;w:%d\n&quot;,w);</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=l;i++) <span class="built_in">getline</span>(cin,code[i]);</span><br><span class="line">        <span class="comment">//for(int i=1;i&lt;=l;i++) cout&lt;&lt;code[i]&lt;&lt;&quot;###\n&quot;;</span></span><br><span class="line">        ww=<span class="built_in">check</span>();</span><br><span class="line">        <span class="comment">//printf(&quot;ww:%d\n&quot;,ww);</span></span><br><span class="line">        <span class="comment">//cout&lt;&lt;o&lt;&lt;&quot;##\n&quot;;</span></span><br><span class="line">        <span class="keyword">if</span>(ww==<span class="number">-1</span>) <span class="built_in">puts</span>(<span class="string">&quot;ERR&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(ww==w) <span class="built_in">puts</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>被恶心到。恶心死了，NOIP都是什么模拟啊。</p>
<h2 id="noip2010机器翻译">1003 <a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960/1003">NOIP2010机器翻译</a></h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> m , n ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; dic;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">        <span class="type">int</span> precin; cin &gt;&gt; precin;</span><br><span class="line">        dic.<span class="built_in">emplace_back</span>(precin);</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; cache;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">1</span> ;</span><br><span class="line">	<span class="type">int</span> cnt = <span class="number">1</span> ;</span><br><span class="line">	<span class="type">int</span> it = <span class="number">0</span> ;</span><br><span class="line">    cache.<span class="built_in">emplace_back</span>(dic[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ; i &lt; n ; i ++)&#123;</span><br><span class="line">		<span class="type">int</span> cn = <span class="number">0</span> ;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt; cache.<span class="built_in">size</span>() ; j ++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(dic[i] == cache[j]) <span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">else</span> cn ++ ;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">if</span>(cn == cache.<span class="built_in">size</span>())&#123;</span><br><span class="line">            <span class="keyword">if</span>(len == m)&#123; <span class="comment">// if que full</span></span><br><span class="line">				cache[it] = dic[i];</span><br><span class="line">				it = (it + <span class="number">1</span>) % m ;</span><br><span class="line">				cnt ++ ;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123; <span class="comment">// que no full </span></span><br><span class="line">				cache.<span class="built_in">emplace_back</span>(dic[i]);</span><br><span class="line">				cnt ++ ;</span><br><span class="line">				len ++ ;</span><br><span class="line">			&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	cout &lt;&lt; cnt ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="四舍五入">1004 <a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960/1004">四舍五入</a></h2>
<ul>
<li>模拟 wc</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n , t , add = <span class="number">0</span> ;</span><br><span class="line">	string s , ans ;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;t);</span><br><span class="line">    cin &gt;&gt; s ;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">// if back from (n - 1) ~ 0 if s[0] &gt; &#x27;5&#x27; : ans = &quot;1&quot; + s[] </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = s.<span class="built_in">size</span>() - <span class="number">1</span> ; i &gt;= <span class="number">0</span> ; i --)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;.&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="number">0</span> &amp;&amp; add == <span class="number">1</span>)&#123;</span><br><span class="line">            s[i] ++ ;</span><br><span class="line">            add = <span class="number">0</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i] != <span class="string">&#x27;.&#x27;</span> &amp;&amp; t &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> tmp = s[i] - <span class="string">&#x27;0&#x27;</span> + add ;</span><br><span class="line">            <span class="keyword">if</span>(tmp &lt; <span class="number">5</span>)&#123;</span><br><span class="line">                s[i] = tmp + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                add = <span class="number">0</span> ;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                s[i] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                add = <span class="number">1</span> ;</span><br><span class="line">                t -- ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(add == <span class="number">1</span>) s = <span class="string">&quot;1&quot;</span> + s ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = s.<span class="built_in">size</span>() - <span class="number">1</span> ; i &gt;=<span class="number">0</span> ; i --)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;0&#x27;</span>) s.<span class="built_in">pop_back</span>();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="https://img-blog.csdnimg.cn/9db7626e285f4fada01dc163f8d5ad88.png" alt="在这里插入图片描述">
<figcaption aria-hidden="true">在这里插入图片描述</figcaption>
</figure>
<p>测试用例都过了，也只是过了测试用例。</p>
<ul>
<li>AC</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="type">char</span> s[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;t);</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">    x = y = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;.&#x27;</span>) <span class="comment">// return index of &#x27;.&#x27; for x</span></span><br><span class="line">        &#123;</span><br><span class="line">            x = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x == <span class="number">-1</span>)&#123; <span class="comment">//no &#x27;.&#x27; cout s</span></span><br><span class="line">        cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n<span class="number">-1</span>;i &gt;= x;i --)&#123; <span class="comment">// return first digit</span></span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27;0&#x27;</span> || s[i] == <span class="string">&#x27;.&#x27;</span>) n --;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = x+<span class="number">1</span>;i &lt; n;i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] &gt;= <span class="string">&#x27;5&#x27;</span>)&#123; <span class="comment">// return first index of p5</span></span><br><span class="line">            y = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(y == <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n;i ++)&#123; </span><br><span class="line">            cout &lt;&lt; s[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = y;i &gt; x + <span class="number">1</span> ; i --)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] &gt;= <span class="string">&#x27;5&#x27;</span> &amp;&amp; t)&#123;</span><br><span class="line">                s[i] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                s[i<span class="number">-1</span>]++;</span><br><span class="line">                t --;</span><br><span class="line">                y --;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[x+<span class="number">1</span>]  &gt;= <span class="string">&#x27;5&#x27;</span> &amp;&amp; t)&#123;</span><br><span class="line">            s[x<span class="number">-1</span>] ++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = x<span class="number">-1</span>;i &gt; <span class="number">0</span>;i --)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i] == <span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">                    s[i] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                    s[i<span class="number">-1</span>]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s[<span class="number">0</span>] == <span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt; x;i ++) cout &lt;&lt; <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; x;i ++)&#123;</span><br><span class="line">                    cout &lt;&lt; s[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt;= y;i ++) cout &lt;&lt; s[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="回文数">1008 <a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/20960/1008">回文数</a></h2>
<ul>
<li>答案错误 用例通过率为 39.13%</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span> ;</span><br><span class="line">    <span class="type">int</span> c ;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; ans ;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> flag = <span class="number">0</span> ;</span><br><span class="line">    <span class="type">int</span> a0, n0 ;</span><br><span class="line">    cin &gt;&gt; a0 ;</span><br><span class="line">    <span class="keyword">if</span>(a0 % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        cnt ++ ;</span><br><span class="line">        c = <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    n0 = a0/<span class="number">2</span> ;</span><br><span class="line">    <span class="keyword">if</span>(a0 != <span class="number">0</span>) flag = <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ; i &lt; <span class="number">10</span> ; i ++)&#123;</span><br><span class="line">        <span class="type">int</span> a ;</span><br><span class="line">        cin &gt;&gt; a ;</span><br><span class="line">        <span class="keyword">if</span>(a % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            cnt ++ ;</span><br><span class="line">            c = i ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="type">int</span> n = a / <span class="number">2</span> ;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt; n ; j ++)&#123;</span><br><span class="line">                ans.<span class="built_in">emplace_back</span>(i) ;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span> ; j &lt; n0 ; j ++)&#123;</span><br><span class="line">                    ans.<span class="built_in">emplace_back</span>(<span class="number">0</span>) ;</span><br><span class="line">                &#125; flag = <span class="number">0</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(cnt &gt; <span class="number">1</span>)&#123; <span class="comment">// 超过一个奇数</span></span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl ;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(cnt == <span class="number">1</span>)&#123; <span class="comment">// 只有一个奇数</span></span><br><span class="line">        <span class="keyword">if</span>(ans.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">if</span>(a0 != <span class="number">0</span> &amp;&amp; c != <span class="number">0</span>)&#123; <span class="comment">// 唯一奇数唯一偶数，且偶数为0</span></span><br><span class="line">                cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl ;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="number">0</span>)&#123; <span class="comment">// 唯一奇数0</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n0 ; i ++)&#123;</span><br><span class="line">                    ans.<span class="built_in">emplace_back</span>(<span class="number">0</span>) ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans.<span class="built_in">emplace_back</span>(c) ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = ans.<span class="built_in">size</span>() - <span class="number">2</span> ; i &gt;= <span class="number">0</span> ; i -- )&#123;</span><br><span class="line">            ans.<span class="built_in">emplace_back</span>(ans[i]) ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123; <span class="comment">// 没有奇数</span></span><br><span class="line">        <span class="keyword">if</span>(ans.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">if</span>(a0 != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n0 ; i ++)&#123;</span><br><span class="line">                    ans.<span class="built_in">emplace_back</span>(<span class="number">0</span>) ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl ;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = ans.<span class="built_in">size</span>() - <span class="number">1</span> ; i &gt;= <span class="number">0</span> ; i -- )&#123;</span><br><span class="line">            ans.<span class="built_in">emplace_back</span>(ans[i]) ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; ans.<span class="built_in">size</span>() ; i ++)&#123;</span><br><span class="line">        cout &lt;&lt; ans[i] ;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li></li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">int</span> ecnt[<span class="number">13</span>];</span><br><span class="line"><span class="type">char</span> ans[<span class="number">303</span>];</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> jcnt=<span class="number">0</span>,sum=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;ecnt[i]);</span><br><span class="line">        <span class="keyword">if</span>(ecnt[i]%<span class="number">2</span>)jcnt++;</span><br><span class="line">        sum+=ecnt[i];</span><br><span class="line">        <span class="keyword">if</span>(ecnt[i]!=<span class="number">0</span>)cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=sum;</span><br><span class="line">    <span class="keyword">if</span>(cnt==<span class="number">1</span>&amp;&amp;ecnt[<span class="number">0</span>]&gt;<span class="number">0</span>)&#123;<span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sum==<span class="number">0</span>||jcnt&gt;<span class="number">1</span>||(cnt&lt;=<span class="number">2</span>&amp;&amp;sum-ecnt[<span class="number">0</span>]&lt;=<span class="number">1</span>&amp;&amp;ecnt[<span class="number">0</span>]!=<span class="number">0</span>))&#123;<span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=ecnt[i]/<span class="number">2</span>;j++)&#123;</span><br><span class="line">            ans[l]=ans[r]=i+<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            l++,r--;</span><br><span class="line">            <span class="keyword">if</span>(l==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=ecnt[<span class="number">0</span>]/<span class="number">2</span>;j++)&#123;</span><br><span class="line">                ans[l]=ans[r]=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                l++,r--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(ecnt[i]%<span class="number">2</span>)ans[sum/<span class="number">2</span>+<span class="number">1</span>]=i+<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ecnt[<span class="number">0</span>]%<span class="number">2</span>)ans[sum/<span class="number">2</span>+<span class="number">1</span>]=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,ans+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/06/%E8%80%83%E7%A0%94/23%E7%8E%8B%E9%81%93/23%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20C3-1%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/06/%E8%80%83%E7%A0%94/23%E7%8E%8B%E9%81%93/23%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20C3-1%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/" itemprop="url">23王道操作系统 C3-1内存管理概念</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-06T00:00:00+08:00">
                2022-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="内存管理的基本原理和内容">3.1.1 内存管理的基本原理和内容</h2>
<p>内存管理的概念就是<strong>操作系统对内存的划分与动态分配</strong>。</p>
<p>内存管理主要功能有：</p>
<ul>
<li><p><strong>内存空间的分配与回收。</strong></p></li>
<li><p><strong>地址转换。</strong>在多道程序环境下，程序中的逻辑地址与内存物理地址一定不一致，因此内存管理必须提供地址变换功能，把逻辑地址转换成相应的物理地址。</p></li>
<li><p><strong>内存空间的扩充。</strong>利用虚拟存储技术或自动覆盖技术，从逻辑上扩充内存。</p></li>
<li><p><strong>内存共享。</strong>指允许多个进程访问内存的同一部分。</p></li>
<li><p><strong>存储保护。</strong>保证各道作业在各自的存储空间内运行，互不干扰。</p></li>
</ul>
<h3 id="程序的链接与装入">1. 程序的链接与装入</h3>
<ul>
<li><strong>编译。</strong>由编译程序将用户源代码编译成若干目标模块。</li>
<li><strong>链接。</strong>由链接程序将编译后形成的一组模块及它们所需的库函数链接在一起，形成一个完整的装入模块。</li>
<li><strong>装入。</strong>由装入程序将装入模块装入内存。</li>
</ul>
<p>链接有以下三种方式：</p>
<ol type="1">
<li><strong>静态链接</strong></li>
</ol>
<p>在程序运行之前，先将各目标模块及它们所需的库函数链接成一个完整的装配模块，以后不再拆开。装入模块时，需要解决：1.
修改相对地址。2.
变换外部调用符号，将每个模块中所用的外部调用符号也转换为相对地址。</p>
<ol start="2" type="1">
<li><strong>装入时动态链接</strong></li>
</ol>
<p>将用户源程序编译后得到的一组目标模块，在装入内存时，边装入边链接。<strong>优点</strong>：便于修改和更新，便于实现对目标模块的共享。</p>
<ol start="3" type="1">
<li><strong>运行时动态链接</strong></li>
</ol>
<p>在程序执行中需要该模块时才进行链接。<strong>优点</strong>：加快程序的装入过程，还可以节省大量内存空间。</p>
<p>装入有以下三种方式：</p>
<ol type="1">
<li><strong>绝对装入</strong></li>
</ol>
<p>只适用于单道程序环境。</p>
<ol start="2" type="1">
<li><strong>可重定位装入</strong></li>
</ol>
<p>在多道程序环境下，多个目标模块的起始地址通常从0开始，程序中的其他地址都是相对于起始地址的。在装入时对目标程序中指令和数据地址修改的过程称为<strong>重定位</strong>。又地址变换通常是在进程装入时一次完成的，故称为<strong>静态重定位</strong>。</p>
<p>当一个作业装入内存时，必须给它分配要求的全部内存空间，若没有足够内存，则无法装入。此外，作业一旦进入内存，整个运行期间就不能在内存中移动，也不能再申请内存空间。</p>
<ol start="3" type="1">
<li><strong>动态运行时装入</strong></li>
</ol>
<p>也称<strong>动态重装入</strong>。装入程序把装入模块装入内存后，不立即把相对地址改为绝对地址，而是等程序真正运行时转换。因此装入内存后的所有地址均为相对地址。该方法需要一个重定位寄存器的支持。</p>
<p><strong>优点</strong>：可以将程序分配到不连续的存储区；在程序运行前可以只装入部分代码便可投入运行，在运行期间，根据需要动态申请分配内存；便于程序段的共享。</p>
<p><img src="https://img-blog.csdnimg.cn/2b7e016e909d4556b8fb237940301cce.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h3 id="逻辑地址与物理地址">2. 逻辑地址与物理地址</h3>
<p>OS通过内存管理部件MMU将进程使用的逻辑地址转为物理地址。进程使用虚拟内存空间中的地址，操作系统在相关硬件的协助下，将它“转换”成真正的物理地址。逻辑地址通过页表映射到物理内存，页表由操作系统维护并被处理器引用。</p>
<h3 id="进程的内存映像">3. 进程的内存映像</h3>
<p>一个进程的内存映像包括：</p>
<ul>
<li>代码段：程序的二进制代码，只读，可以被多个进程共享。</li>
<li>数据段：程序运行加工处理的对象，包括全局变量和静态变量。</li>
<li>进程控制块（PCB）：存放在系统区。OS通过PCB来控制管理进程。</li>
<li>栈：用来实现函数调用。从用户空间的最大地址往最低地址方向增长。</li>
<li>堆：用来存放动态分配的变量。通过调用malloc函数动态地向高地址分配空间。</li>
</ul>
<h3 id="内存保护">4. 内存保护</h3>
<p>确保每个进程都有一个单独的内存空间。内存保护可采取两种方法：</p>
<ol type="1">
<li>在CPU中设置一对上下限寄存器，存放用户作业在储存中的上限和下限地址，每当CPU要访问一个地址时，分别和两个寄存器的值相比，判断有无越界。</li>
<li>采用<strong>重定位寄存器（基地址寄存器）</strong>和<strong>界地址寄存器（限长寄存器）</strong>来实现保护。重定位寄存器含最小的物理地址值，界地址寄存器含逻辑地址的最大值。</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/f9c09c8b5e8245678c3ae6a122043577.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h3 id="内存共享">5. 内存共享</h3>
<p>只有只读的进程内存空间适合共享。<strong>可重入代码</strong>又称纯代码，是一种允许多个进程同时访问但不允许被任何进程修改的代码。</p>
<h3 id="内存分配与回收">6. 内存分配与回收</h3>
<p>在操作系统由单道向多道发展时，存储管理方式由单一连续分配发展为固定分区分配。</p>
<p>为了适应不同大小的程序要求，从固定分区分配发展到动态分区分配。</p>
<p>为了更好提高内存的利用率，从连续分配方式发展到离散分配方式——页式存储管理。</p>
<p>分段存储管理，为了满足用户在编程和使用方面的需求。</p>
<h2 id="连续分配管理方式">3.1.3 连续分配管理方式</h2>
<p>指为一个用户程序分配一个连续的内存空间。</p>
<h3 id="单一连续分配">1. 单一连续分配</h3>
<h3 id="固定分区分配">2. 固定分区分配</h3>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/04/03/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/%E7%BE%8E%E5%9B%A2%E8%B5%9B%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95%E8%AF%84%E4%BB%B7%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/03/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/%E7%BE%8E%E5%9B%A2%E8%B5%9B%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95%E8%AF%84%E4%BB%B7%E6%A8%A1%E5%9E%8B/" itemprop="url">2022美团商业分析赛AHP评价模型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-03T00:00:00+08:00">
                2022-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" itemprop="url" rel="index">
                    <span itemprop="name">数学建模</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基于层次分析法ahp高校外卖车适应度评价模型">基于层次分析法AHP高校外卖车适应度评价模型</h2>
<p>层次分析法是一种解决多目标的复杂问题的定性与定量相结合的决策分析方法。该方法将定量分析与定性分析结合起来，用决策者的经验判断各衡量目标之间能否实现的标准之间的相对重要程度，并合理地给出每个决策方案的每个标准的权数，利用权数求出各方案的优劣次序，可以比较有效地解决高校外卖车适应度评价的课题。</p>
<h3 id="一指标选定">一、指标选定</h3>
<p>我们研究美团魔袋20在大学校园投放的适宜指数，基于此，我们选取一些江苏高校作为样本，分析并确认可能影响美团无人车投放适宜程度的指标，将其分为一级指标和二级指标，收集并不断整理各大高校的指标数据。我们一共定义了4个一级指标，分别是校园布局、消费潜力、学校类型和地区发展。其中，校园布局是无人车运行的物理环境，属于硬约束，对无人车的投放有着至关重要的影响力。在此基础上，我们延伸出了校园面积、食堂数量、宿舍分布、食堂宿舍距离、校园市场渗透情况5个二级指标。校园面积在一定程度上决定是否有必要引进校内外卖；食堂数量很大程度上反映食堂聚集和拥挤程度，进而影响学生点外卖的频率；食宿距离影响学生去食堂就餐的意愿；校园市场渗透情况也能够反映出学校的外卖化程度以及学校对外卖的接受程度。</p>
<p>在食堂数量的选取上，我们考虑到在一些高校里，存在几个食堂挨在一起的情况。我们将相距200米以内的食堂群落进行聚类，将他们视为一个食堂计数。以江苏师范大学为例，通过聚类将9个食堂归纳为4个食堂，如下图所示：</p>
<p><img src="https://img-blog.csdnimg.cn/5ca11aee6bc54dfab77d0419d4b5e70e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>第二个一级指标是消费潜力，属于软约束，一个学校的消费潜力越大，就越有可能进行美团无人配送车的投放。在此基础上，我们延伸出学生人数、人均可支配收入、月外卖量、客单价4个二级指标。学生人数能反映出学校食堂的人流量和密集程度，同时与外卖量有一定的相关性；人均可支配收入由于数据的可获取性，我们选取的是学校所在城市的人均可支配收入，在一定程度上也能反映出学生的消费水平；外卖量的多少对美团无人车投放数量有很大的影响；客单价也可以作为一个反应学生的消费水平的因素。</p>
<p>第三个一级指标是学校类型，我们思考男女比例、学校层次和培养结构、学校类别、招生生源广度是否对一个学校的外卖外程度有所影响，并将其作为二级指标进行分析。男女比例、学校层次和培养结构、大学类别作为潜在造成校园外卖化差异的指标，我们赋予它一定的权重来影响美团无人配送车在大学校园投放的适宜度；招生生源广度指招生的范围，我们考虑到不同地区的学生具有不同的饮食习惯和偏好，这将对校园外卖量具有一定的影响。</p>
<p>第四个一级指标是地区发展，不同地区的经济发展水平不同，而美团无人配送车的投放需要一定量的成本，因此地区发展状况对美团无人配送车的投放有一定的影响。在此基础上，我们延伸出了人均GDP、城市就业率、校园周边外卖化3个二级指标。人均GDP我们选取了城市人均GDP，这项指标能够放映出一个城市的人力成本，这与投放美团无人配送车的决策息息相关；城市就业率我们选取一个城市的适龄劳动人口数量比重，反映出一个城市的人力资源，如果老龄化严重，那么美团无人配送车可以弥补外卖员的空缺；校园周边外卖化我们选取校园周围一千米内外卖店数量，校园周边外卖化程度对学生是否点校外外卖具有较大的影响。</p>
<h3 id="二建立层次结构模型">二、建立层次结构模型</h3>
<p>为了判断以上15个指标对因变量G的影响大小，我们可以采取对因子进行两两比较建立成对比较矩阵的办法。即每次取两个因子
<span class="math inline">\(x_i\)</span> 和 <span class="math inline">\(x_j\)</span> ，以 <span class="math inline">\(a_{ij}\)</span> 表示 <span class="math inline">\(x_i\)</span> 和 <span class="math inline">\(x_j\)</span> 对G的影响大小之比，全部比较结果用矩阵
<span class="math inline">\(A = (A_{ij})_{n*n}\)</span> 表示，称 A 为 G
− X 之间的成对比较判断矩阵（简称判断矩阵）。容易看出，若 <span class="math inline">\(x_i\)</span> 与 <span class="math inline">\(x_j\)</span> 对 G 的影响之比为 <span class="math inline">\(a_{ij}\)</span> ，则 <span class="math inline">\(x_i\)</span> 与 <span class="math inline">\(x_j\)</span> 对 G 的影响之比应为 <span class="math inline">\(a_{ji} = \frac {1}{a_{ij}}\)</span> 。</p>
<p>关于如何确定的值 ，我们引用数字 1- 9 及其倒数作为标度。下表列出了 1 -
9 标度的含义：</p>
<table>
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th>标度</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>表示两个因素相比,具有相同重要性</td>
</tr>
<tr class="even">
<td>3</td>
<td>表示两个因素相比,前者比后者稍重要</td>
</tr>
<tr class="odd">
<td>5</td>
<td>表示两个因素相比,前者比后者明显重要</td>
</tr>
<tr class="even">
<td>7</td>
<td>表示两个因素相比,前者比后者强烈重要</td>
</tr>
<tr class="odd">
<td>9</td>
<td>表示两个因素相比,前者比后者极端重要</td>
</tr>
<tr class="even">
<td>2，4，6，8</td>
<td>表示上述相邻判断的中间值</td>
</tr>
<tr class="odd">
<td>倒数</td>
<td>若因素i与因素j的重要性之比为<span class="math inline">\(a_{ij}\)</span>,那么因素j与因素i重要性之比为<span class="math inline">\(a_{ji} = \frac{1}{a_{ij}}\)</span></td>
</tr>
</tbody>
</table>
<h3 id="三构造判断矩阵">三、构造判断矩阵</h3>
<p>我们看到美团外卖车在中国矿业大学（南湖校区）的试用，于是对矿大学生进行了外卖车相关的调查，得到反馈如下：</p>
<p><img src="https://img-blog.csdnimg.cn/e49eb820fb6f4ebf8749f94949ace771.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>同时我们查阅相关文献资料，获得到相应一级判断矩阵：</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>校园布局</th>
<th>消费潜力</th>
<th>学校类型</th>
<th>地区发展</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>校园布局</td>
<td>1</td>
<td>1/2</td>
<td>3/2</td>
<td>1</td>
</tr>
<tr class="even">
<td>消费潜力</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="odd">
<td>学校类型</td>
<td>2/3</td>
<td>1/3</td>
<td>1</td>
<td>2/3</td>
</tr>
<tr class="even">
<td>地区发展</td>
<td>1</td>
<td>1/2</td>
<td>3/2</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>类似的，我们得到四个二级判断矩阵。</p>
<h3 id="四一致性检验">四、一致性检验</h3>
<ol type="1">
<li><strong>计算一致性指标CI</strong></li>
</ol>
<p><span class="math display">\[
CI = \frac{\lambda_{max} - n}{n - 1}
\]</span></p>
<ol start="2" type="1">
<li><strong>查找相应的平均随机一致性指标 RI</strong></li>
</ol>
<p>用随机方法构造 500 个样本矩阵：随机地从 1~9
及其倒数中抽取数字构造正互反矩阵，求得最大特征根的平均值 <span class="math inline">\(\lambda_{max}\)</span>，并定义： <span class="math display">\[
RI = \frac{\lambda&#39;_{max} - n}{n - 1}
\]</span></p>
<p>对n = 2，……，10，给出 RI 的值，如下表所示。</p>
<table>
<thead>
<tr class="header">
<th>n</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RI</td>
<td>0</td>
<td>0.58</td>
<td>0.90</td>
<td>1.12</td>
<td>1.24</td>
<td>1.32</td>
<td>1.41</td>
<td>1.45</td>
<td>1.49</td>
</tr>
</tbody>
</table>
<ol start="3" type="1">
<li><strong>计算一致性比例CR</strong></li>
</ol>
<p><span class="math display">\[
CR = \frac{CI}{RI}
\]</span></p>
<p>当CR &lt; 0.10
时，认为判断矩阵的一致性是可以接受的，否则应对判断矩阵作适当修正。</p>
<p>经过一致性检验，该判断矩阵的 <span class="math inline">\(CR=
-3.3265e^{-16} &lt; 0.10\)</span>，因此我们接受该判断矩阵的一致性。</p>
<h3 id="五计算权重">五、计算权重</h3>
<ol type="1">
<li><strong>算术平均法求权重</strong></li>
</ol>
<p>首先我们将判断矩阵按照列归一化（每一个元素除以其所在列的和），再将归一化的各列相加(按行求和)，最后将相加后得到的向量中每个元素除以n即可得到权重向量。</p>
<p><span class="math display">\[
\omega_i = \frac{1}{n} \sum_{j=1}^n \frac{a_{ij}}{\sum_{k=1}^na_{kj}}
\]</span></p>
<ol start="2" type="1">
<li><strong>几何平均法求权重</strong></li>
</ol>
<p>首先我们将A的元素按照行相乘得到一个新的列向量，再将新的向量的每个分量开n次方，最后对该列向量进行归一化即可得到权重向量。</p>
<p><span class="math display">\[
\omega_i =
\frac{(\prod_{j=1}^na_{ij})^\frac{1}{n}}{(\sum_{k=1}^n\prod_{j=1}^na_{kj})^\frac{1}{n}}
\]</span></p>
<ol start="3" type="1">
<li><strong>特征值法求权重</strong></li>
</ol>
<p>首先我们求出矩阵A的最大特征值以及其对应的特征向量，再对求出的特征向量进行归一化即可得到我们的权重。</p>
<p>用三种方法得到的权重值如下表所示：</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>算术平均法</th>
<th>几何平均法</th>
<th>特征值法</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>校园布局</td>
<td>0.2143</td>
<td>0.2143</td>
<td>0.2143</td>
</tr>
<tr class="even">
<td>消费潜力</td>
<td>0.4286</td>
<td>0.4286</td>
<td>0.4286</td>
</tr>
<tr class="odd">
<td>学校类型</td>
<td>0.1429</td>
<td>0.1429</td>
<td>0.1429</td>
</tr>
<tr class="even">
<td>地区发展</td>
<td>0.2143</td>
<td>0.2143</td>
<td>0.2143</td>
</tr>
</tbody>
</table>
<p>三种方法所求权重结果相同，体现了结果的可信度与模型的稳健性。</p>
<h3 id="六数据收集">六、数据收集</h3>
<p>一级指标的指标说明如下：U1校园布局，无人车运行的物理环境属于硬约束。U2消费潜力，无人车运行的物理环境属于软约束，可以通过宣传营销来引导它，针对其具体特点改变供给。U3学校类型，可以根据具体各项比例等来调整共给，灵活变通，适应其需求。U4地区发展，决定改用无人车配送的成本因素。</p>
<p>根据上面确立的一级指标，对二级指标说明，并展开数据收集：</p>
<table>
<tr>
<td>
一级指标
</td>
<td>
二级指标
</td>
<td>
指标定义
</td>
<td>
计算方法
</td>
<td>
计量单位
</td>
<td>
数据来源
</td>
</tr>
<tr>
<td rowspan="4">
U1 校园布局
</td>
<td>
面积
</td>
<td>
校园的面积在一定程度上决定是否有必要引进校内外卖，也对无人配送车运力分析具有重要作用
</td>
<td>
</td>
<td>
亩
</td>
<td>
学校官网
</td>
</tr>
<tr>
<td>
食堂数量
</td>
<td>
食堂数量很大程度上影响了学生点外卖的频率
</td>
<td>
查看学校地图，搜索各大网络平台相关信息
</td>
<td>
个
</td>
<td>
采访学生，学校地图，网络平台
</td>
</tr>
<tr>
<td>
食堂宿舍距离
</td>
<td>
食堂距离宿舍的远近，影响学生去食堂就餐的意向
</td>
<td>
高德地图上查看食堂与宿舍之间最远与最近的大概距离
</td>
<td>
米
</td>
<td>
高德地图
</td>
</tr>
<tr>
<td>
校园市场渗透情况
</td>
<td>
反应学校对外卖的接受程度，校园外卖系统基础
</td>
<td>
有无外卖柜、无人配送机器人
</td>
<td>
</td>
<td>
队员采访同学、微博等各平台推送
</td>
</tr>
<tr>
<td rowspan="4">
U2 消费潜力
</td>
<td>
学生人数
</td>
<td>
学生人数能够反应食堂的密集程度，也与外卖量有相关性
</td>
<td>
根据学校每年录取的本科生数、研究生数、博士生数来估计整个学校的学生人数
</td>
<td>
个
</td>
<td>
学校官网，百度百科，采访学生
</td>
</tr>
<tr>
<td>
人均可支配收入
</td>
<td>
城市人均可支配收入能够反映当地消费水平
</td>
<td>
搜索资料
</td>
<td>
元
</td>
<td>
江苏省统计局
</td>
</tr>
<tr>
<td>
月外卖量
</td>
<td>
高校1km范围内美团平台上商家2022三月的销量
</td>
<td>
平台爬取
</td>
<td>
取平均值
</td>
<td>
平台爬取
</td>
</tr>
<tr>
<td>
客单价
</td>
<td>
高校1km范围内美团平台上商家的平均客单价
</td>
<td>
大学圈附近外卖客单价平均数
</td>
<td>
元
</td>
<td>
平台爬取
</td>
</tr>
<tr>
<td rowspan="4">
U3 学校类型
</td>
<td>
男女比例
</td>
<td>
2021年学校生源中女生占总人口的比例
</td>
<td>
查看学校推文或者大学女生比例排行榜
</td>
<td>
%
</td>
<td>
学校官网、高考网、搜狐新闻等
</td>
</tr>
<tr>
<td>
学校层次，培养结构（学历）
</td>
<td>
培养学士、硕士、博士中的哪几类
</td>
<td>
查看学校官网或者百度查找
</td>
<td>
</td>
<td>
学校官网、百度
</td>
</tr>
<tr>
<td>
大学类别
</td>
<td>
12类大学分别是理工类、综合类、语言类、医药类、财经类、体育类、艺术类、师范类、民族类、农业类、军事类和政法类。将其作为一项指标，分析其是否与大学外卖化有关
</td>
<td>
学校官网、百度百科
</td>
<td>
</td>
<td>
学校官网、百度百科
</td>
</tr>
<tr>
<td>
招生生源广度
</td>
<td>
招生生源广度指招生的范围，不同地区的学生具有不同的饮食习惯和偏好
</td>
<td>
在学校官网里查找学校招生计划，通过各省招生人数测算本省招生率
</td>
<td>
</td>
<td>
学校官网招生计划数据
</td>
</tr>
<tr>
<td rowspan="3">
U4 地区发展
</td>
<td>
所属城市经济发展水平
</td>
<td>
2021年学校所属城市的人均GDP
</td>
<td>
搜索资料
</td>
<td>
亿元
</td>
<td>
江苏省统计局
</td>
</tr>
<tr>
<td>
所属城市可劳动人口比
</td>
<td>
2021年学校所属城市里15~59岁人口对总人口的占比
</td>
<td>
搜索资料
</td>
<td>
%
</td>
<td>
第七次全国人口普查公报
</td>
</tr>
<tr>
<td>
校园周边环境(外卖化程度)
</td>
<td>
当下校园美团平台上1km以内的商家数
</td>
<td>
平台爬取
</td>
<td>
个
</td>
<td>
平台爬取
</td>
</tr>
</table>
<p>鉴于量纲差异，具体数据分为三个折线图展示：</p>
<p><img src="https://img-blog.csdnimg.cn/344ce8cfdec24f1484f9919af57481aa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p><img src="https://img-blog.csdnimg.cn/c2b36a9b4318417b82fae5ec1ba08bbe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p><img src="https://img-blog.csdnimg.cn/9acc5ca2a4a44b2e98c05e3e8c54f955.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h3 id="七数据预处理">七、数据预处理</h3>
<p>将15个指标收集来的数据进行非量纲化，将数据分类为效益型，成本型和区间型三种指标，进行标准0-1变换。</p>
<p>对于效益型指标<span class="math inline">\(x_j\)</span>，令 <span class="math display">\[
b_{ij} = \frac {a_{ij} - {a_j}^{min}} {a_{j}^{max} - a_j^{min}}
\]</span> 对于成本型指标<span class="math inline">\(x_j\)</span>，令
<span class="math display">\[
b_{ij} = \frac {a_j^{max} - a_{ij}}{a_j^{max} - a_j^{min}}
\]</span> 对于区间型指标<span class="math inline">\(x_j\)</span>，假设最优属性区间为<span class="math inline">\([a_j^0,a_j^*]\)</span>，<span class="math inline">\(a_j^`\)</span> 为无法容忍下限，<span class="math inline">\(a_j^{``}\)</span>为无法容忍上限，则 <span class="math display">\[
b_{ij} = \begin{cases} 1 - \frac{a_j^0 - a_{ij}}{a_j^0 - a_j^`}
\quad\quad a_j^`\leq a_{ij} \leq a_j^0 \\
1\quad\quad\quad\quad\quad\quad a_j^0 \leq a_{ij} \leq a_j^* \\ 1 -
\frac{a_{ij} - a_j^*}{a_j^{``} - a_j^*} \quad\quad a_j^*\leq a_{ij} \leq
a_j^{``} \\ 0 \quad \quad\quad\quad\quad\quad其他 \end{cases}
\]</span>
对选定指标15个指标，根据分成的校园布局（U1），消费能力（U2），学校类型（U3），地区发展（U4）这4个子因素集变换，得到如下雷达图：</p>
<p><img src="https://img-blog.csdnimg.cn/b758e72afbd3481ab3745090bdeeab38.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h3 id="八计算评分">八、计算评分</h3>
<p>最后依据评分公式给39所高校评分并排行： <span class="math display">\[
\begin{cases}G_{target} = \sum_{i=1}^4 W_i * G_i \\ G_i = \sum_{j=
1}^{j_i} W_{ij} * x_{ij} \end{cases}
\]</span></p>
<h3 id="九结论">九、结论</h3>
<p>该模型的商业应用价值可以从以下角度理解：</p>
<p><strong>首先</strong>，只要获取一所高校特定的 15
个指标并将其代入投放适度指数评价模型，就能得到魔</p>
<p>袋 20
高校投放适宜度的具体得分，这对于无人配送车在大学校园的投放决策具有直接的指导意</p>
<p>义，谨以此研究，希望给 mei 团市场部相关负责人一个参考和建议。</p>
<p><strong>其次</strong>，当我们同时关注某个区域的多所高校，而企业资源又存在约束的条件下，可以帮助决</p>
<p>定投放的优先顺序，如果将市场扩大到园区、开发区、社区、医院等相对封闭的环境，我们可以</p>
<p>参考该模型并进行微调即可使用。</p>
<p><strong>最后</strong>，作为无人配送车的运营方，如果能有前期运营的内部数据，可以对本模型的权重进行</p>
<p>验证或重新分配，并结合成本数据完成保本点的业务量分析，经过多次反复迭代，相信一定能对</p>
<p>无人配送车市场投放策略不断优化，从而为企业提质增效。</p>
<p><strong>综上所述</strong>，我们认为基于江苏高校的投放适度指数评价模型不仅可以检验魔袋
20 目前在高</p>
<p>校试点投放的效果，也有望以科技抗疫的手段解决大疫情背景下减少人力配送、实现无接触配送</p>
<p>的燃眉之急，同时，可以预见随着未来人力成本会越来越昂贵，人力资源会越来越稀缺，尽早进</p>
<p>行魔袋 20 投放的试行策略研究，对 mei
团外卖无人车的未来发展至关重要。当然，由于受本轮</p>
<p>疫情的影响，本次研究我们收集的数据范围明显不足，另外，所有数据全部来自网络，无论是外</p>
<p>部商户还是高校均无法进行实地考察和访谈，后期如果有机会，我们会努力弥补这些缺憾。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangerxzai.github.io/2022/03/30/%E8%80%83%E7%A0%94/23%E7%8E%8B%E9%81%93/23%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20C2-4%E6%AD%BB%E9%94%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不学习变傻瓜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/03/30/%E8%80%83%E7%A0%94/23%E7%8E%8B%E9%81%93/23%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20C2-4%E6%AD%BB%E9%94%81/" itemprop="url">23王道操作系统 C2-4死锁</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-30T00:00:00+08:00">
                2022-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="死锁概念">2.4.1 死锁概念</h2>
<ol type="1">
<li>死锁定义</li>
</ol>
<p>指多个进程因竞争资源而造成的一种僵局（互相等待），若无外力作用，这些进程都将无法向前推进。</p>
<p><img src="https://img-blog.csdnimg.cn/d21f06a79d0e487289982291ee2a4514.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="2" type="1">
<li>死锁产生的原因</li>
</ol>
<p>（1）<strong>系统资源的竞争。</strong></p>
<p>通常系统中拥有的不可剥夺资源，其数量无法满足多个进程运行的需要，使得进程在运行过程中，会因争夺资源而陷入僵局。<strong>只有不可剥夺资源可能发生死锁</strong>，可剥夺资源不会发生死锁。</p>
<p>（2）<strong>进程推进顺序非法。</strong></p>
<p>进程在运行过程中，<strong>请求和释放资源顺序不当</strong>会导致死锁，<strong>信号量使用不当</strong>也会造成死锁。</p>
<p>（3）<strong>死锁产生的必要条件。</strong></p>
<p>死锁的发生<strong>必须同时满足</strong>4个条件：<strong>1.
互斥条件</strong>：一段时间内某个资源仅为一个进程占有。<strong>2.
不剥夺条件</strong>：只能由获得该资源的进程自己释放（只能是主动释放）。<strong>3.
请求并保持条件</strong>：进程已经保持了至少一个资源，又提出新的资源请求，而请求进程被阻塞，但对自己已获得的资源保持不放。<strong>4.
循环等待条件</strong>：存在一个循环等待链，链中每个进程已获得的资源同时被链中下一个进程所请求。</p>
<p>资源分配图含圈而系统又不一定死锁的原因是：同类资源数大于1
。但若系统中每类资源都只有一个资源，则资源分配图就变成了系统出现死锁的<strong>充分必要条件</strong>。</p>
<ol start="3" type="1">
<li>死锁处理策略</li>
</ol>
<p>（1）死锁预防。（2）避免死锁。（3）死锁的检测和解除。</p>
<table>
<colgroup>
<col style="width: 5%">
<col style="width: 24%">
<col style="width: 19%">
<col style="width: 21%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>资源分配策略</th>
<th>各种可能模式</th>
<th>主要优点</th>
<th>主要缺点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>死锁预防</strong></td>
<td>保守，宁可资源闲置</td>
<td>一次请求所有资源，资源剥夺，资源按需分配</td>
<td>适用于突发式处理的进程，不必进行剥夺</td>
<td>效率低，进程初始化时间延长；剥夺次数过多；不便灵活申请新资源</td>
</tr>
<tr class="even">
<td><strong>死锁避免</strong></td>
<td>是“预防”和“检测”的折中（在运行时判断是否可能死锁）</td>
<td>寻找可能的安全允许顺序</td>
<td>不必进行剥夺</td>
<td>必须知道将来的资源需求；进程不能被长时间阻塞</td>
</tr>
<tr class="odd">
<td><strong>死锁检测</strong></td>
<td>宽松，只要允许就分配资源</td>
<td>定期检查死锁是否已经发生</td>
<td>不延长进程初始化时间，允许对死锁进行现场处理</td>
<td>通过剥夺解除死锁，造成损失</td>
</tr>
</tbody>
</table>
<h2 id="死锁预防">2.4.2 死锁预防</h2>
<p>防止死锁的发生只需破坏死锁产生的四个条件之一即可。</p>
<ol type="1">
<li>破坏互斥条件</li>
</ol>
<p>但有些资源根本不能同时访问。所以，破坏互斥条件而预防死锁的方法<strong>不太可行</strong>，而且在有的场合应该保护这种互斥性。</p>
<p><img src="https://img-blog.csdnimg.cn/ff94fcf935244f3881322d0435e6b2b9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="2" type="1">
<li>破坏不剥夺条件</li>
</ol>
<p>意味着，一个进程已占有的资源会被暂时释放，或者说是被剥夺，或从而破坏了不剥夺条件。</p>
<p>该策略实现起来比较复杂，释放已获得的资源可能造成前一阶段工作的失效，反复地申请和释放资源会增加系统开销，降低系统吞吐量。这种方法常用于<strong>状态易于保存和恢复的资源</strong>，如CPU寄存器及内存资源，一般不能用于打印机之类的资源。</p>
<p><img src="https://img-blog.csdnimg.cn/8566c8a419834e17872a80ea6e4ecd78.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="3" type="1">
<li>破坏请求并保持条件</li>
</ol>
<p>采用<strong>预先静态分配</strong>方法，即进程在运行前一次申请完它所需要的全部资源，在它资源未满足时，不把它投入运行。一旦进程运行，不再提出其他资源请求，这样可以保证系统不会发生死锁。</p>
<p>这种方式实现简单，但是<strong>系统资源被严重浪费</strong>，其中有些资源可能仅在运行初期或快结束才使用，甚至不使用。而且会导致<strong>饥饿</strong>现象。</p>
<p><img src="https://img-blog.csdnimg.cn/dd04eb5cba2f48cf8fc4d51f1334feeb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="4" type="1">
<li>破坏循环等待条件</li>
</ol>
<p>采用顺序资源分配法。首先给系统中的资源编号，规定每个进程必须按照编号递增的顺序请求资源，同类资源一次申请完。</p>
<p>问题在于，编号必须相对稳定，这<strong>限制了新类型设备的增加</strong>；尽管在为资源编号时已考虑到大多数作业实际使用这些资源的顺序，但也经常会发生<strong>作业使用资源的顺序与系统规定顺序不同的情况，造成资源的浪费</strong>。也会<strong>给用户编程带来麻烦</strong>。</p>
<p><img src="https://img-blog.csdnimg.cn/2dc39892e80742cda61da6c01ed38710.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h2 id="死锁避免">2.4.3 死锁避免</h2>
<p>同样属于事先预防策略。在<strong>资源动态分配</strong>过程中，防止系统进入不安全状态，以避免发生死锁。</p>
<ol type="1">
<li>系统安全状态</li>
</ol>
<p>允许进程动态地申请资源，但资源在进行资源分配之前，应先计算此次分配的安全性。</p>
<p>所谓<strong>安全状态</strong>，是指系统能按某种进程推进顺序为每个进程分配其所需资源，直至满足每个进程Pi对资源的最大需求，使每个进程都可以顺序完成。此时Pn称为安全序列。若系统中找不到一个安全序列，则称系统处于不安全状态。</p>
<p><img src="https://img-blog.csdnimg.cn/a448279a0ad04d13a9ef8481f4e7a235.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>2.<strong>银行家算法</strong></p>
<p>在银行中，客户申请贷款的数量是有限的，每个客户在第一次申请贷款时要声明完成该项目所需的最大资金量，在满足所有贷款要求时，客户应及时归还。银行家在客户申请的贷款数量不超过自己拥有的最大值时，都应尽量满足客户的需要。在这样的描述中，银行家就好比操作系统，资金就是资源，客户就相当于要申请资源的进程。
银行家算法是一种最有代表性的避免死锁的算法。在避免死锁方法中允许进程动态地申请资源，但系统在进行资源分配之前，应先计算此次分配资源的安全性，若分配不会导致系统进入不安全状态，则分配，否则等待。为实现银行家算法，系统必须设置若干数据结构。</p>
<p><strong>（1）数据结构描述</strong></p>
<ol type="1">
<li><strong>可利用资源向量 Available</strong>。这是一个含有 m
个元素的数组，其中的每一个元素代表<strong>一类可利用的资源数目</strong>，其初始值是系统中所配置的该类全部可用资源的数目，其数值随该类资源的分配和回收而动态地改变。如果
Available[j] = K，则表示系统中现Rj类资源K个。</li>
<li><strong>最大需求矩阵Max</strong>。这是一个n*m的矩阵，它定义了系统中n个进程中的每个进程对m类资源的<strong>最大需求</strong>。如果Max[i,j]
= K，则表示进程i需要Rj 类资源的最大数目为K。</li>
<li><strong>分配矩阵
Allocation</strong>。这也是一个n*m的矩阵，它定义了系统中每一类资源当前<strong>已分配</strong>给每一进程的<strong>资源数</strong>。如果
Allocation[i,jl = K，则表示进程i当前己分得Rj类资源的数目为K。</li>
<li><strong>需求矩阵Need</strong>。这也是一个n*m的矩阵，用以表示每一个进程<strong>尚需</strong>的<strong>各类资源数</strong>。如果Need[i,j]
= K，则表示进程i还需要Rj类资源K个方能完成其任务。</li>
</ol>
<p>述三个矩阵间存在下述关系: 　　　　　　　　　　　　　　Need[i,j] =
Max[i,j] - allocation[i, j]</p>
<p><strong>（2）银行家算法描述</strong></p>
<p>设 Request是进程Pi的请求向量，如果 Requesti[j] =
K，表示进程Pi需要K个Rj类型的资源。当Pi发出资源请求后，系统按下述步骤进行检査:
　　1) 如果 <strong>Requesti[j] ≤ Need[i,j]</strong>
便转向步骤(2)；否则认为出错，因为它所需要的资源数已超过它所宣布的最大值。
　　2) 如果 <strong>Requesti[j] ≤ Available[j]</strong>
，便转向步骤(3)；否则，表示尚无足够资源，Pi须等待。 　　3)
系统试探着把资源分配给进程Pi，并修改下面数据结构中的数值
　　　　<strong>Available[j] = Available[j] - Requesti[j];</strong>
　　　　　　　　　　　　　　<strong>Allocation[i,j] = Allocation[i,j] +
Requesti[j];</strong> 　　　　　　　　　　　　　　<strong>Need[i,j] =
Need[i,j] - Requesti[j];</strong> 　　4)
系统执行安全性算法，检查此次资源分配后系统是否处于安全状态。若安全，才正式将资源分配给进程Pi，以完成本次分配；否则，将本次的试探分配作废，恢复原来的资源分配状态，让进程Pi等待。</p>
<p><strong>（3）安全性算法</strong></p>
<p>系统所执行的安全性算法可描述如下: 　　1) 设置两个向量：
　　①工作向量Work，它表示<strong>系统中剩余的各类资源可用数目</strong>，它含有m个元素，在执行安全算法开始时，Work
= Available；
　　　　　　　　　　　　②Finish，它表示<strong>系统是否有足够的资源分配给进程，使之运行完成</strong>。开始时先做
Finish[i] = false；当有足够资源分配给进程时，再令Finish[i] = true。</p>
<p>　　2) 从进程集合中找到一个能满足下述条件的进程 　　① Finish[i] =
false; // 该行不在安全序列中 　　　　　　　　　　　　② Need[i,j] ≤
Work[j]; // 该行小于等于work向量</p>
<p>　　若找到，执行步骤(3)，否则，执行步骤(4)。</p>
<p>　　2)
当进程Pi获得资源后，可顺利执行，直至完成，并释放出分配给它的资源，故应执行:
　　　　　　　　Work[j] = Work[j] + Allocation[i,j];
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　Finish[i]
= true; // 进入安全队列
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　go to
step 2; (goto语句不推荐使用) // 返回步骤2</p>
<ol start="4" type="1">
<li>如果所有进程的 Finish[i]
=true都满足，则表示系统处于安全状态；否则，系统处于不安全状态。</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/734adea69e984523aa3ffbbc7bb53c95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>安全性算法的C实现</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> resourceNum 3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> processNum  5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//系统可用（剩余）资源</span></span><br><span class="line"><span class="type">int</span> available[resourceNum]=&#123;<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>&#125;;</span><br><span class="line"><span class="comment">//进程的最大需求</span></span><br><span class="line"><span class="type">int</span> maxRequest[processNum][resourceNum]=&#123;&#123;<span class="number">7</span>,<span class="number">5</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>&#125;,&#123;<span class="number">9</span>,<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>&#125;,&#123;<span class="number">4</span>,<span class="number">3</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//进程已经占有（分配）资源</span></span><br><span class="line"><span class="type">int</span> allocation[processNum][resourceNum]=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//进程还需要资源</span></span><br><span class="line"><span class="type">int</span> need[processNum][resourceNum]=&#123;&#123;<span class="number">7</span>,<span class="number">4</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>&#125;,&#123;<span class="number">6</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//是否安全</span></span><br><span class="line"><span class="type">bool</span> Finish[processNum];</span><br><span class="line"><span class="comment">//安全序列号</span></span><br><span class="line"><span class="type">int</span> safeSeries[processNum]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//进程请求资源量</span></span><br><span class="line"><span class="type">int</span> request[resourceNum];</span><br><span class="line"><span class="comment">//资源数量计数</span></span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印输出系统信息</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">showInfo</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n------------------------------------------------------------------------------------\n&quot;</span>);  </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;当前系统各类资源剩余：&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,available[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\n当前系统资源情况：\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; PID\t Max\t\tAllocation\t Need\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; processNum; i++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; P%d\t&quot;</span>,i);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,maxRequest[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t\t&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,allocation[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t\t&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,need[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印安全检查信息</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SafeInfo</span><span class="params">(<span class="type">int</span> *work, <span class="type">int</span> i)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; P%d\t&quot;</span>,i);</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,work[j]);</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t\t&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,allocation[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\t\t&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,need[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t\t&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d&quot;</span>,allocation[i][j]+work[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断一个进程的资源是否全为零</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isAllZero</span><span class="params">(<span class="type">int</span> kang)</span></span><br><span class="line">&#123;</span><br><span class="line">	num = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++ )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(need[kang][i] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			num ++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(num == resourceNum)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//安全检查</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isSafe</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//int resourceNumFinish = 0;</span></span><br><span class="line">	<span class="type">int</span> safeIndex = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> allFinish = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> work[resourceNum] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="type">int</span> r = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> temp = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> pNum = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//预分配为了保护available[]</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++)</span><br><span class="line">	&#123;		</span><br><span class="line">        work[i] = available[i];	</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//把未完成进程置为false</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; processNum; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">bool</span> result = isAllZero(i);</span><br><span class="line">		<span class="keyword">if</span>(result == <span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Finish[i] = <span class="literal">true</span>;</span><br><span class="line">			allFinish++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			Finish[i] = <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//预分配开始</span></span><br><span class="line">    <span class="keyword">while</span>(allFinish != processNum)</span><br><span class="line">	&#123;</span><br><span class="line">		num = <span class="number">0</span>;	</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(need[r][i] &lt;= work[i] &amp;&amp; Finish[r] == <span class="literal">false</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				num ++;</span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(num == resourceNum)</span><br><span class="line">		&#123;		</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++ )</span><br><span class="line">			&#123;</span><br><span class="line">				work[i] = work[i] + allocation[r][i];</span><br><span class="line">			&#125;</span><br><span class="line">			allFinish ++;</span><br><span class="line">			SafeInfo(work,r);</span><br><span class="line">			safeSeries[safeIndex] = r;</span><br><span class="line">			safeIndex ++;</span><br><span class="line">			Finish[r] = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		r ++;<span class="comment">//该式必须在此处	</span></span><br><span class="line">		<span class="keyword">if</span>(r &gt;= processNum)</span><br><span class="line">		&#123;</span><br><span class="line">			r = r % processNum;</span><br><span class="line">			<span class="keyword">if</span>(temp == allFinish)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">break</span>;	</span><br><span class="line">			&#125;</span><br><span class="line">			temp = allFinish;</span><br><span class="line">		&#125;		</span><br><span class="line">		pNum = allFinish;</span><br><span class="line">    &#125;	</span><br><span class="line">	<span class="comment">//判断系统是否安全</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; processNum; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(Finish[i] == <span class="literal">false</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n当前系统不安全！\n\n&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;	</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//打印安全序列</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n当前系统安全！\n\n安全序列为：&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; processNum; i++)</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="type">bool</span> result = isAllZero(i);</span><br><span class="line">		<span class="keyword">if</span>(result == <span class="literal">true</span>)</span><br><span class="line">		&#123;		</span><br><span class="line">			pNum --;</span><br><span class="line">		&#125;	</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; pNum; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,safeSeries[i]);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//主函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> curProcess = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">-1</span>;</span><br><span class="line">       showInfo(); </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n系统安全情况分析\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot; PID\t Work\t\tAllocation\t Need\t\tWork+Allocation\n&quot;</span>);</span><br><span class="line">	<span class="type">bool</span> isStart = isSafe();</span><br><span class="line">	<span class="comment">//用户输入或者预设系统资源分配合理才能继续进行进程分配工作</span></span><br><span class="line">    <span class="keyword">while</span>(isStart)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//限制用户输入，以防用户输入大于进程数量的数字，以及输入其他字符（乱输是不允许的）</span></span><br><span class="line">      	<span class="keyword">do</span></span><br><span class="line">		&#123; </span><br><span class="line">			<span class="keyword">if</span>(curProcess &gt;= processNum || a == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n请不要输入超出进程数量的值或者其他字符：\n&quot;</span>);</span><br><span class="line">				<span class="keyword">while</span>(getchar() != <span class="string">&#x27;\n&#x27;</span>)&#123;&#125;;<span class="comment">//清空缓冲区	</span></span><br><span class="line">				a = <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n------------------------------------------------------------------------------------\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n输入要分配的进程：&quot;</span>);</span><br><span class="line">			a = <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;curProcess);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		&#125;<span class="keyword">while</span>(curProcess &gt;= processNum || a == <span class="number">0</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//限制用户输入，此处只接受数字，以防用户输入其他字符（乱输是不允许的）</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">do</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(a == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;\n请不要输入除数字以外的其他字符，请重新输入：\n&quot;</span>);</span><br><span class="line">					<span class="keyword">while</span>(getchar() != <span class="string">&#x27;\n&#x27;</span>)&#123;&#125;;<span class="comment">//清空缓冲区	</span></span><br><span class="line">					a = <span class="number">-1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;请输入要分配给进程 P%d 的第 %d 类资源：&quot;</span>,curProcess,i+<span class="number">1</span>);</span><br><span class="line">				a = <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;request[i]);</span><br><span class="line">			&#125;<span class="keyword">while</span>( a == <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//判断用户输入的分配是否合理，如果合理，开始进行预分配</span></span><br><span class="line">		num  = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="keyword">if</span>(request[i] &lt;= need[curProcess][i] &amp;&amp; request[i] &lt;= available[i])</span><br><span class="line">			&#123;</span><br><span class="line">				num ++;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n发生错误！可能原因如下：\n(1)您请求分配的资源可能大于该进程的某些资源的最大需要！\n(2)系统所剩的资源已经不足了！\n&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num == resourceNum)</span><br><span class="line">		&#123;	</span><br><span class="line">			num = <span class="number">0</span>;	</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//分配资源</span></span><br><span class="line">                available[j] = available[j] - request[j];</span><br><span class="line">                allocation[curProcess][j] = allocation[curProcess][j] + request[j];</span><br><span class="line">                need[curProcess][j] = need[curProcess][j] - request[j];</span><br><span class="line">				<span class="comment">//记录分配以后，是否该进程需要值为0了</span></span><br><span class="line">				<span class="keyword">if</span>(need[curProcess][j] == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					num ++;</span><br><span class="line">				&#125;</span><br><span class="line">            &#125;</span><br><span class="line">			<span class="comment">//如果分配以后出现该进程对所有资源的需求为0了，即刻释放该进程占用资源（视为完成）</span></span><br><span class="line">			<span class="keyword">if</span>(num == resourceNum)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//释放已完成资源</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; resourceNum; i++ )</span><br><span class="line">				&#123;</span><br><span class="line">					available[i] = available[i] + allocation[curProcess][i];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n\n本次分配进程 P%d 完成,该进程占用资源全部释放完毕！\n&quot;</span>,curProcess);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//资源分配可以不用一次性满足进程需求</span></span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n\n本次分配进程 P%d 未完成！\n&quot;</span>,curProcess);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			showInfo();</span><br><span class="line">           	<span class="built_in">printf</span>(<span class="string">&quot;\n系统安全情况分析\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot; PID\t Work\t\tAllocation\t Need\t\tWork+Allocation\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//预分配完成以后，判断该系统是否安全，若安全，则可继续进行分配，若不安全，将已经分配的资源换回来</span></span><br><span class="line">            <span class="keyword">if</span>(!isSafe())</span><br><span class="line">			&#123; 	        </span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; resourceNum; j++)</span><br><span class="line">				&#123;</span><br><span class="line">					available[j] = available[j] + request[j];</span><br><span class="line">					allocation[curProcess][j] = allocation[curProcess][j] - request[j];</span><br><span class="line">					need[curProcess][j] = need[curProcess][j] +request[j];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;资源不足，等待中...\n\n分配失败！\n&quot;</span>);				</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="死锁检测和解除">2.4.4 死锁检测和解除</h2>
<ol type="1">
<li>资源分配图</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/629c3f72516741b3a43c003ced9003cf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="2" type="1">
<li>死锁定理</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/583b6c7aacf0472dadad588e3433cac6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol start="3" type="1">
<li>死锁解除</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/1d214cb989a9414dae96f1fd0b89bd50.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuZ2VyX3h4,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h2 id="习题">2.4.6 习题</h2>
<ul>
<li>可能导致死锁的是<strong>多个进程竞争资源出现了循环等待</strong>。</li>
</ul>
<p><strong>一个</strong>进程进入死循环，会导致进程的饥饿。</p>
<ul>
<li>系统产生死锁的可能原因是<strong>独占资源分配不当</strong>。</li>
</ul>
<p>系统资源不足，导致的是饥饿。</p>
<ul>
<li>某系统中有三个并发进程都需要四个同类资源，则该系统必然不会发生死锁的最少资源是<strong>10</strong>。</li>
</ul>
<p>如果是9，存在情况：三个进程各有三个同类资源，死锁。为10时，至少有一个资源有4个资源，完成并释放。</p>
<ul>
<li>两个并发进程，运行结果是<strong>程序不能正确运行，结果不确定</strong>。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x, y, z, t, u ;</span><br><span class="line">P1()&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        x = <span class="number">1</span> ;</span><br><span class="line">        y = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= <span class="number">1</span>) y = y + <span class="number">1</span> ;</span><br><span class="line">        z = y ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">P2()&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        x = <span class="number">0</span> ;</span><br><span class="line">        t = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">if</span>(x &lt;= <span class="number">1</span>) t = t + <span class="number">2</span> ;</span><br><span class="line">        u = t ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>x 始终 小于等于1
，P2始终可以运行，不会死锁。最后因为执行顺序不同，可能有三种结果。</p>
<ul>
<li>S1采用死锁避免，S2采用死锁检测，正确的是<strong>S1需要进程运行所需的资源总量信息，而S2不需要；S1不会给可能导致死锁的进程分配资源，而S2会</strong>。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wanger</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>





  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
